/**
 * cron: 20 1 0 * * *
*/
console.log('当前版本号', '202310-v1.0')
const yxl = require('./depend/yxl')
const $ = new Env('邀请领现金（店铺签到专用）');

var version_='jsjiami.com.v7';const _0x2797fd=_0x30b0;(function(_0x1fdbcb,_0x1c3071,_0x8f0ebd,_0x452ff1,_0x442ac8,_0x27a2b3,_0x50c62f){return _0x1fdbcb=_0x1fdbcb>>0x2,_0x27a2b3='hs',_0x50c62f='hs',function(_0x157324,_0x3ccd21,_0x552d38,_0x24fb20,_0x9baba){const _0x5e6719=_0x30b0;_0x24fb20='tfi',_0x27a2b3=_0x24fb20+_0x27a2b3,_0x9baba='up',_0x50c62f+=_0x9baba,_0x27a2b3=_0x552d38(_0x27a2b3),_0x50c62f=_0x552d38(_0x50c62f),_0x552d38=0x0;const _0xfd15f2=_0x157324();while(!![]&&--_0x452ff1+_0x3ccd21){try{_0x24fb20=parseInt(_0x5e6719(0x112,'D5Aj'))/0x1*(parseInt(_0x5e6719(0x1a3,'uJ^J'))/0x2)+parseInt(_0x5e6719(0xab,'Mi1E'))/0x3+parseInt(_0x5e6719(0xdb,'cAn)'))/0x4+parseInt(_0x5e6719(0xf0,'Dtux'))/0x5*(-parseInt(_0x5e6719(0x9d,'NKgx'))/0x6)+parseInt(_0x5e6719(0xbe,'*zCn'))/0x7*(parseInt(_0x5e6719(0xcd,'8@@o'))/0x8)+parseInt(_0x5e6719(0x126,'Xpui'))/0x9*(-parseInt(_0x5e6719(0x14f,'JQ&p'))/0xa)+parseInt(_0x5e6719(0x16b,'uSKt'))/0xb;}catch(_0x3ca389){_0x24fb20=_0x552d38;}finally{_0x9baba=_0xfd15f2[_0x27a2b3]();if(_0x1fdbcb<=_0x452ff1)_0x552d38?_0x442ac8?_0x24fb20=_0x9baba:_0x442ac8=_0x9baba:_0x552d38=_0x9baba;else{if(_0x552d38==_0x442ac8['replace'](/[duSbKEQrfhUXIFtDHGJLM=]/g,'')){if(_0x24fb20===_0x3ccd21){_0xfd15f2['un'+_0x27a2b3](_0x9baba);break;}_0xfd15f2[_0x50c62f](_0x9baba);}}}}}(_0x8f0ebd,_0x1c3071,function(_0x507744,_0x58b9b1,_0xf35b97,_0x565206,_0x4bcab6,_0x539204,_0x284c54){return _0x58b9b1='\x73\x70\x6c\x69\x74',_0x507744=arguments[0x0],_0x507744=_0x507744[_0x58b9b1](''),_0xf35b97=`\x72\x65\x76\x65\x72\x73\x65`,_0x507744=_0x507744[_0xf35b97]('\x76'),_0x565206=`\x6a\x6f\x69\x6e`,(0x144ad9,_0x507744[_0x565206](''));});}(0x300,0x45173,_0x57cf,0xc2),_0x57cf)&&(version_=_0x2797fd(0xc5,'quOS'));const notify=$[_0x2797fd(0x115,'9&55')]()?require(_0x2797fd(0xa0,'quOS')):'',jdCookieNode=$['isNode']()?require('./jdCookie'):'',yxllxj=require(_0x2797fd(0xdd,'W0Wm'));let cookiesArr=[],cookie='',message='',message1='',message2='',UA,UAInfo={};$['lxjhot']=![];let linkIdarry={},linkId='';process['env']['TK_SIGN_method']&&process[_0x2797fd(0x106,'uJ^J')]['TK_SIGN_method']==_0x2797fd(0xb3,'ZhZI')?$[_0x2797fd(0xb0,'quOS')]=!![]:$['changeplan']=![];function _0x30b0(_0x5e8a11,_0x5e3bd8){const _0x57cf78=_0x57cf();return _0x30b0=function(_0x30b091,_0x365aef){_0x30b091=_0x30b091-0x84;let _0x1d6bb8=_0x57cf78[_0x30b091];if(_0x30b0['jfgpNG']===undefined){var _0x38dee4=function(_0x208c2b){const _0x38a9ae='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4d42cc='',_0x3beaa0='';for(let _0x4e1c44=0x0,_0x59fa4a,_0x515a5c,_0x570e85=0x0;_0x515a5c=_0x208c2b['charAt'](_0x570e85++);~_0x515a5c&&(_0x59fa4a=_0x4e1c44%0x4?_0x59fa4a*0x40+_0x515a5c:_0x515a5c,_0x4e1c44++%0x4)?_0x4d42cc+=String['fromCharCode'](0xff&_0x59fa4a>>(-0x2*_0x4e1c44&0x6)):0x0){_0x515a5c=_0x38a9ae['indexOf'](_0x515a5c);}for(let _0x14d9ab=0x0,_0x496698=_0x4d42cc['length'];_0x14d9ab<_0x496698;_0x14d9ab++){_0x3beaa0+='%'+('00'+_0x4d42cc['charCodeAt'](_0x14d9ab)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3beaa0);};const _0x56e100=function(_0x4a4136,_0x418c2c){let _0x498e0c=[],_0x598c4f=0x0,_0xad895d,_0x214157='';_0x4a4136=_0x38dee4(_0x4a4136);let _0x50148e;for(_0x50148e=0x0;_0x50148e<0x100;_0x50148e++){_0x498e0c[_0x50148e]=_0x50148e;}for(_0x50148e=0x0;_0x50148e<0x100;_0x50148e++){_0x598c4f=(_0x598c4f+_0x498e0c[_0x50148e]+_0x418c2c['charCodeAt'](_0x50148e%_0x418c2c['length']))%0x100,_0xad895d=_0x498e0c[_0x50148e],_0x498e0c[_0x50148e]=_0x498e0c[_0x598c4f],_0x498e0c[_0x598c4f]=_0xad895d;}_0x50148e=0x0,_0x598c4f=0x0;for(let _0x52082b=0x0;_0x52082b<_0x4a4136['length'];_0x52082b++){_0x50148e=(_0x50148e+0x1)%0x100,_0x598c4f=(_0x598c4f+_0x498e0c[_0x50148e])%0x100,_0xad895d=_0x498e0c[_0x50148e],_0x498e0c[_0x50148e]=_0x498e0c[_0x598c4f],_0x498e0c[_0x598c4f]=_0xad895d,_0x214157+=String['fromCharCode'](_0x4a4136['charCodeAt'](_0x52082b)^_0x498e0c[(_0x498e0c[_0x50148e]+_0x498e0c[_0x598c4f])%0x100]);}return _0x214157;};_0x30b0['iEGMNz']=_0x56e100,_0x5e8a11=arguments,_0x30b0['jfgpNG']=!![];}const _0x34a4e9=_0x57cf78[0x0],_0x5a9cbf=_0x30b091+_0x34a4e9,_0x688186=_0x5e8a11[_0x5a9cbf];return!_0x688186?(_0x30b0['opLjqz']===undefined&&(_0x30b0['opLjqz']=!![]),_0x1d6bb8=_0x30b0['iEGMNz'](_0x1d6bb8,_0x365aef),_0x5e8a11[_0x5a9cbf]=_0x1d6bb8):_0x1d6bb8=_0x688186,_0x1d6bb8;},_0x30b0(_0x5e8a11,_0x5e3bd8);}if(process[_0x2797fd(0xd8,'$Kya')][_0x2797fd(0x11e,'Ek%w')])$[_0x2797fd(0xc9,'cAn)')]=process['env'][_0x2797fd(0x183,'*zCn')]||'',$['TK_SIGN_SIGN']=process['env']['TK_SIGN_SIGN']||'',$[_0x2797fd(0xe5,'(Eu!')]={'id':$[_0x2797fd(0x14e,'8@@o')],'sign':$[_0x2797fd(0x99,'W2WZ')]};else process[_0x2797fd(0x85,']3(&')][_0x2797fd(0x11f,'i12A')]?($['TK_SIGN']=process[_0x2797fd(0xaf,'CKwA')][_0x2797fd(0x15e,'6Toe')],$['TK_SIGN']=$['toObj']($[_0x2797fd(0xd3,'9&55')],$[_0x2797fd(0x159,'Mz9U')])):console[_0x2797fd(0xe9,'k9gd')]('联系@dpqd_boss获取TK_SIGN.');if($['isNode']()){Object[_0x2797fd(0x133,'6Toe')](jdCookieNode)[_0x2797fd(0xc1,'4zT0')](_0x48a876=>{const _0x3e67df=_0x2797fd;cookiesArr[_0x3e67df(0xdc,'79w6')](jdCookieNode[_0x48a876]);});if(process[_0x2797fd(0x19b,'plne')]['JD_DEBUG']&&process[_0x2797fd(0x120,'oqZu')]['JD_DEBUG']===_0x2797fd(0xf3,'SRBp'))console[_0x2797fd(0x94,'8@@o')]=()=>{};}else cookiesArr=[$[_0x2797fd(0x8e,'D5Aj')](_0x2797fd(0xcb,'6Toe')),$[_0x2797fd(0x122,'#a@x')](_0x2797fd(0x156,'#Ru1')),...jsonParse($[_0x2797fd(0x13a,'k9gd')]('CookiesJD')||'[]')[_0x2797fd(0xe7,'quOS')](_0x244143=>_0x244143[_0x2797fd(0x12c,'6Toe')])][_0x2797fd(0x18f,'cAn)')](_0x4c8e8e=>!!_0x4c8e8e);function _0x57cf(){const _0x25709b=(function(){return[...[version_,'uXjLsjbFfiQGaQISmtMdiE.EUcDHohmUJ.rEvtK7==','W7FcMb4MW54','WRtdO8kIWR5L','WR/cQCkEuuyNuXi4uW','W5C5WQpcOmoIWOFcGffFWRxdTJq','aL8Ijce','WQrUhCoWrvhcHW','W6JcISkiWQLK','WPddNmoUWRBcPSoowCkYW5ddNSkQga','pCkNuSovqSkaoq','pCoBW6nnbSkeo0K5','WQmknmoJwmoeW4/dLLC','WRBdVgy','W5RcRtiIWPG','WQv+DuW/amk5','WQfwW7/cNCkL','W4BcSHyg','veXuW6xdRtC7cgLO','WRrwpmo7qa','qJVdHCoaWRJdPCkd','pcZdJIZdNtWdWRa','FWpdLSo8WPBdI8kJ','WOtdReDBW7SvWQK','56scWOK2jSkCFmoj','WPJcISkGCgOPEq','57Ut5PYI77Yg5yUg5yU66BMf5lQv77+u','WObZW4xdU0G','W5GzBSo0aCoDWRldRLrepSo+gmkSefyxWPKoWRHcW6SgjmksrGDCWOLVla','5yMA5yQe5OQ85yIh','WPaqkmoG','6k6c5yMi6zQH5Os55z6rE8k4CSkNl+I+PUweNEAGMos+K+AxKowgVEwSO0lLUQlOR4pPGRVOV7ROHkhMNBBLJy/OJ7lLJy1LWORdPCkxWPBcHW','n0GT','WRxdKSoiW7avxN3dI8oUBfivCW','DtJdO8ogWOu','W4jpyxWH','EqJdLCoyWRK','WOGan8o4y8oeW7BdPWKd','aZdcNW','hWldJsNdPa','WQpdVxLzW6i','57UV5P6177YI5Rc05P625yU75yUt5Q2C5Pw177YD','cefhoSkg','WRHaEM4E','W5hcI8kkW7hdPq','aSoHWR41aq','CCoVWRL0rq','FcyS','W67cQmo6','cmkCzmoIASkZfG','W4NcUbWeW6r6','WRldMdeOW7FdVSkD','57Qh5P2X776O5Bs057Mx5yUY5yIz6l20rCkd77Yy','WRJdNJG','ohWWEW','omkiW5ZcOCoSmW','WPr2W6FcKmkeWPe1uq','raiuW4ypEemsW64z','W67cUdytW7C','WP/cJCkoygu','WP5qW43cKG','W65WxgyMxG','sfFcMa','o3ikE8o2','WOPlW6pcVXK','WORcKSkOzM4uFa','uSo0AZuY','qfNcI8oH','WQxcKXm','pu4MmGxcRW','jSkiW5pcOSo5k8oRWOi','wmorBbCt','57Qa5PYh772D5lII6igS5yIx5yQh6iEu5BAU77+Z','W69MFNKev2i','FITSp8k1W4hcOCo3pCoYWOtcVG','FSofv8oqb8kTvXO','WP4XW5ZcGCk4','WPeXW57dM8k8W6NdPeNdIJRcGaC','fmozivJdKW','WRhdL3fSW5mMWOy','W4VcUru','nSo1mq','e8koEmoJzW','j394mmkB','WRtdMmksW6iW5yIR5yUe5ys35Aw+6lAR776i5lMm5lYa5PQ05PEi5BQx6zob5Psq5OYT772o77+G77Yw7726772uc8oGpHG','cmkzECoUzmk1nmkXW5ddHW','W5pcPXWlWOy','sLNcKSoL','iG/dRbFdIW','ESkEWQitwCotff0pD8okW4C','oLi+lG/cRX7cVmkVdW','W65TDMW6','qvBcIq','WPFdRubxWQaLW74pWQBdKeKn','n8o0kuO','CHhdRSoY','W6GlWR7cUCo5','57QC5P6b772d5PYL55U/5B6I77+n'],...(function(){return[...['W5LtWRpdPCoP','kh9Q','W5pcV8ol','WQP4jCo7q0ZcIa','WQBdSu5UW4y','WQ5YnCo6','WQLtp8ohvG','WO/dT1HjWRO4WP8','WPvAW4xcHX00W6/dG2W','WOFcJCkM','tmoDW5JcOCkB','WRXzW5xcJCkp','dLqVnc7cVddcTG','W79pWPJdKCocW4Ge','W5nitvOlFeVcPmotW5T6ra','57U55PYZ776B5lI66lYY5RcI5B+L5AwK5PA25lQ96lYw772z','FWJcVCoMWQRdUCoS','WOmnoSoMvSoeW7xdVGqz','W4iVWPtcRHVcN8kXW68lwcbIlq','p8o0ia','WOzuq2S','kSkpvSoAhCkGDbddGx1xW5e','WPKPnComrW','tu8pnwi','W6rIzMOQ','W4VcJSk4WPnH','WPqqCa','WOOEECk3WOiGW6ylWPhcPK8Y','W6dcTWuSW5S','WPWEy8kY','wg59W7FdHW','WOnTWQNdN8om','W4eJWQhdRmoBW5mSAmodW7usaW','BmofsCopiCkHsqRdMwa','m3H4pmkP','W63cOSoFWPb4','dmkcEW','z8oirmorfmkHsHpdLhO','W7nmWPy','W4VcLfFcMGS','WRtdRSkXWQnI','WPmnfmo9DW','WOz3WQK','xSojySoViG','W4VcHCk0W6a','W6RcGSktWQi','lmoCWPifa8o5iG','5yU95yM25OQI5yMzWQJMRBRcQmkzo8oi','eSo1huxdSW','q0yAog3dKmoKk1lcSG','W4nfwhm','jW4bW602z3W','WPiagsDp','W65Tzga2xKpcKSoZW6fuzCkhqCoaWOtdMW','W4pcI8kRW4ddTSkDuW','e8kpF8o2AG','WR3dNZKM','zmolWRm','BSott8oweSkPu1hdLNTCWOBcO8kX','hcVcISkGdSkWWOddGmk4','gSkzBSoLBSk0bmk2W5hdJIBcMfL6WRfc','nh9+kG','d2WvfsNcMHpcJmkclG','WOvKW6ddPSkY','vr/dTCo4WPJdH8khyG','WQfYnG','W5RdLmo0mJ5wCaegwWat','WRFdOCk4WQfn','tSoyW6/cHSkE','rSoaW6y','W53dQSoHWRP4fGq','zSofWRL1','g1ygxmonWRdcGG','oSkDW5NcSSoX','WQtdJLn7W7e','pmkiW57cTSokpSoXW4z9WRy','FaldOmo1WOK','W4/cRu4','w8onW6ldNaC','kcddNYJdPZqdWRa','AHfYD1hdQMVcPCknlmofuWy','W5Drx3O','eYPoyXONjqDxtCocWODBpmog','kConWO8a','WPjQW5JdSeldNSoeW7elBG','p3uLlIC','WPLwdSomA3/cPW','W7jqWPy','W7NdGmomWPPu','WRVdPMrgDvybW7nrW4mRgx8rWRzhW73dOSoQWR7dR8ok','sJpcI8orWOldISod','WOzgW5hdSCkR','ACobvq','j3G1F8owWPlcV8oojSok','WRZdIh8','pCo6kKO','W4NcTX8B','W79CWOxdNmovW5urW59bW6iDWQnuWQxdMdxdOYBdHq'],...(function(){return['W5VcOmokWOvPW6u','WOPuW4hdVe8','WOKHgSo5FG','W7NdJImOW5xcJGes','W5tcOXeDWPVcTmkmW6jRv8oNwCk8AHFdIa','EHNdTmo4WRJdHG','e8owqKxdNa','WRxdGs8LW7ldSCkfBJqQW7BdNZujcv/dHSk/W4ldRXupWQFdNe4AaMjNW4j4xmkd','c8oNW4Doaq','W4TbqNu8oq','suaFm3i','WQXIWPVdGCoV','W4/cOGyoWO3dVCoqWQv+sCo4sCkWCvZdLK4dnG7cT8kNW58','wt3dQSokWOC','WOpcG8kYD0S','guGprCoR','57Ia5PYo77Yk5PYC55M95BY577YV','gCo6WOSGbW','pSkuW5tcVmoo','W4tcOLxcVa','WPWJW5JcN8ku','W5BcPSomWRHPWRHWCc3dQ8oLlZqTvMPFtIaGWOW4gtbaWQq7ys4WaLpdNN/cVSkuWQ7dL8kvW4rYWRRcHa','W6pcMr4AWPC','WRveswW3','WR3dIMS','k8obW6C','WPhdMYGgW5a','CHFcS8ohWRNdVW','WR5OmSo8r0VcMSkGymoGWPVdOumvWPBcUq','rConW6VcICkjW7C','xWq7W4WW','eCoAE2BdKq','AxGZj0C','WPrhwfifia','nuyNiW','W73dJSoXWOTB','WR9HwuOI','W7XRnCoTEeNcSq','57UB5PY477+o5RkX5PYU5Q+e5PEL5lUD772x','xSkRr8o+E8kFbG','jM4xymoGWPi','suVcMa','ddvPqd0fiZe','WQRdQ8kZWQzoW6JcOCo1','W6zZE20Jt2q','nezxeSk7','dmo6xN7dVa','W4JcRHu','WRVcJGWhW7y','xmoVWOTdBSkIW5Seh8k6','W7hcLI0WW5LvW5S','ACoXW7m','W6tdJmon','cdRcJmkTaCkJWOG','WPDYW6FcUq','amkMW63cLCorhmom','ufFcSmoIW7u','gmkyW47cGSklW6hcTCoi','WQfiWPVdV8oq','aWxdJZBdIG','Fsq4','WQddVNLvyW','W6z2zMeTsuBcLmoKW7C','Dr/dTCo4WPJdHW','WOr2W4/cHdO','6iYW5y+v5yIIzc9ip8oX','AMNLPO3OTABcIhxLJ7hLMluTWRS','BmoxCGqOW7bYWQFcR8oQ','oMO8rSoJ','WR1kWP/dQ8o4','FrxdO8oG','ymobuCoE','WOvBW5FcGmkB','gSk5FSoPBq','omonwvpdMW','W47cGCkGW7y','i2uZBmoRWPpcQq','WRFdGMXSW5mMWOy','jSkiW5pcOSo5k8oR','W6xdHZS7W4hdO8k8','WPzlWP7dUmoQ','5QYDxwZcS2C','tX4HW7C','W7DCwfST','BXz5CvhdRrVcOCkecCokEa','WO3cGCkNwhS','WPLcCha1','W47cKtWzWO4','6lY35PYY6i2T5y2B5yQX5yQo5yQ556kS77+C56YY5B2p','p0y+jW','W4ddLmoUWPHz','WPb3W43dTKRdICo3W7iozq','wmouW5RdOr/cLqvQyComrW','iCodWPW','WPfaW73dKSkj'];}())];}())];}());_0x57cf=function(){return _0x25709b;};return _0x57cf();};!(async()=>{const _0x320deb=_0x2797fd,_0x1276f7={'zWiEc':function(_0x486aff,_0x127898){return _0x486aff==_0x127898;},'IVHqM':_0x320deb(0x9a,'Xpui'),'Xopxr':_0x320deb(0x173,'7[(#'),'qvwOt':'结果：已经助力过TA！','JPbGw':function(_0xbd0baa,_0x29d2a8){return _0xbd0baa+_0x29d2a8;},'yKmdb':function(_0x17b8fd,_0x3d86a2){return _0x17b8fd+_0x3d86a2;},'ironn':'https://bean.m.jd.com/bean/signIndex.action','vEQYQ':_0x320deb(0x13b,'LPxM'),'shOuF':'TOKEN','GlBPJ':function(_0x5de33c,_0x1202f7){return _0x5de33c!=_0x1202f7;},'sZaQP':_0x320deb(0x10a,'Xpui'),'YxhbA':function(_0x5d2a26,_0x120c78){return _0x5d2a26==_0x120c78;},'iDAqO':function(_0x1935bf,_0x12eeca){return _0x1935bf!==_0x12eeca;},'DnGHe':'WvVol','whubF':_0x320deb(0xa1,'#Ru1'),'schlM':function(_0x14ec16,_0x115128){return _0x14ec16*_0x115128;},'hwZoC':function(_0x1df8e3,_0xa4cafc){return _0x1df8e3===_0xa4cafc;},'RJwZS':'hVtDm','VUVJo':'yyJwz','OHHPM':function(_0x3e8383,_0x532b85){return _0x3e8383/_0x532b85;},'QVfkt':function(_0x19209c,_0x1978ea){return _0x19209c<_0x1978ea;},'lDzxb':'NPQtg','QamQN':_0x320deb(0x184,'i12A'),'jyfzV':function(_0x3ec466,_0x5ae7cf){return _0x3ec466-_0x5ae7cf;},'hasuD':function(_0x2b5c83,_0x3ac542){return _0x2b5c83!==_0x3ac542;},'ELsuc':_0x320deb(0x135,'Mi1E'),'vVVft':_0x320deb(0x166,'#Ru1'),'oxOKH':'去助力:','npkti':function(_0x56620f,_0x8d62ac){return _0x56620f+_0x8d62ac;},'NPArQ':function(_0x24c885,_0x5a25e8){return _0x24c885(_0x5a25e8);},'sUsof':function(_0x5ca182){return _0x5ca182();},'cgOeX':function(_0x308b2a,_0x147473){return _0x308b2a+_0x147473;},'zcrpa':function(_0x22b2af,_0x5b8ce9){return _0x22b2af+_0x5b8ce9;},'WZlRE':function(_0x569b34,_0x18945b){return _0x569b34+_0x18945b;},'VVzSD':'\x0a******开始【京东账号','VeePH':_0x320deb(0x92,'i12A'),'lbojE':function(_0x5ced6a,_0x18a60e){return _0x5ced6a>_0x18a60e;},'sAiAZ':'count1','YKqjM':_0x320deb(0x19d,'r[AQ'),'yIfsS':_0x320deb(0x93,'$ND^'),'NTsUT':function(_0x9dc685,_0x4cbd25){return _0x9dc685!==_0x4cbd25;}};if(!cookiesArr[0x0]){$[_0x320deb(0x116,']3(&')]($[_0x320deb(0xeb,'fFOS')],'【提示】请先获取京东账号一cookie\x0a直接使用NobyDa的京东签到获取',_0x320deb(0x102,'aFXl'),{'open-url':_0x1276f7['ironn']});return;}console[_0x320deb(0x8c,'r[AQ')](typeof $[_0x320deb(0x124,'LPxM')]['id'],_0x320deb(0x149,'oqZu')+$[_0x320deb(0x189,'9&55')]($['TK_SIGN']['id'])),await $[_0x320deb(0x9f,'Mz9U')](yxl[_0x320deb(0xa6,'ZSN7')](0x3a98,0x61a8)),$[_0x320deb(0x17b,'CKwA')]=await yxl[$[_0x320deb(0x9c,'#Ru1')]?_0x320deb(0x190,'LPxM'):_0x1276f7['vEQYQ']](_0x1276f7[_0x320deb(0xb4,'#Ru1')],$[_0x320deb(0x154,'CKwA')]['id'],$[_0x320deb(0xe1,'D5Aj')][_0x320deb(0x13f,'O]DH')]),$[_0x320deb(0x18b,'8@@o')]=$[_0x320deb(0x110,'3IhK')]($[_0x320deb(0x98,'HC1L')],$['apidata']);if(_0x1276f7[_0x320deb(0x8b,'HC1L')](typeof $[_0x320deb(0x119,'W2WZ')],_0x1276f7[_0x320deb(0x172,'k9gd')])){$[_0x320deb(0x9b,'(Eu!')]=[];return;}if(_0x1276f7[_0x320deb(0x150,'cAn)')](new Date()[_0x320deb(0x182,'Mi1E')](),0x0)){if(_0x1276f7[_0x320deb(0xef,'#Ru1')](_0x1276f7['DnGHe'],_0x1276f7[_0x320deb(0xad,'r[AQ')])){$['zerotime']=await yxl[_0x320deb(0x15f,'s1LL')](_0x1276f7[_0x320deb(0xce,'ZhZI')]($[_0x320deb(0x199,'k9gd')]['begain'],0x3e8));if($[_0x320deb(0x195,'quOS')]<0x1d4c0){if(_0x1276f7[_0x320deb(0x143,'Mz9U')](_0x1276f7[_0x320deb(0x18c,'S&f)')],_0x1276f7[_0x320deb(0xfc,'9&55')])){if(_0x1276f7['zWiEc'](_0x31ba3f[_0x320deb(0x88,'6Toe')][_0x320deb(0xe8,'9&55')],0x8))_0x39712b['log'](_0x1276f7[_0x320deb(0x10d,'8(7E')]);else _0x216042[_0x320deb(0x134,'quOS')]['helpResult']==0x4?_0x1e5af0[_0x320deb(0x9e,'plne')](_0x1276f7[_0x320deb(0x191,'S&f)')]):_0x10ab2b[_0x320deb(0xcc,'D5Aj')](_0x587cac[_0x320deb(0xc6,'#a@x')](_0x2d7b99));}else console[_0x320deb(0x8c,'r[AQ')](_0x320deb(0x145,'CBgU')+_0x1276f7['OHHPM']($['zerotime'],0x3e8)+_0x320deb(0x162,'k9gd')),await $['wait']($['zerotime']);}}else _0x182c98['log'](_0x1276f7['qvwOt']);}linkIdarry=$[_0x320deb(0xb9,'0Yvk')][_0x320deb(0x130,'S&f)')],linkIdarry=$[_0x320deb(0x185,'8@@o')](linkIdarry,linkIdarry),$[_0x320deb(0x121,'3IhK')]=$['apidata'][_0x320deb(0x139,'9&55')],$[_0x320deb(0x8d,'aFXl')]=$['toObj']($[_0x320deb(0x129,'*zCn')],$['mms']),console[_0x320deb(0xc3,'Hq9*')](_0x320deb(0x12e,'W2WZ')+$[_0x320deb(0x176,'4zT0')]($[_0x320deb(0x18e,'Dtux')]));let _0x3d80cb=Object[_0x320deb(0x138,'4zT0')](linkIdarry);for(let _0x16cfd4=0x0;_0x1276f7['QVfkt'](_0x16cfd4,_0x3d80cb[_0x320deb(0x181,'LPxM')]);_0x16cfd4++){$[_0x320deb(0x109,'D5Aj')]=0x0;let _0x112ebe=$[_0x320deb(0x105,'k9gd')][_0x3d80cb[_0x16cfd4]];console['log']('\x0a******开始'+linkIdarry[_0x3d80cb[_0x16cfd4]][_0x320deb(0xb7,'4zT0')]+'助力\x20******\x0a');let _0x128597=0x0;for(let _0x265bb3=0x0;_0x1276f7['QVfkt'](_0x265bb3,cookiesArr[_0x320deb(0xf6,'79w6')]);_0x265bb3++){if(_0x1276f7['lDzxb']===_0x1276f7['QamQN'])_0x222a74['log'](_0x4442bc[_0x320deb(0x90,'D5Aj')],_0xfb2917[_0x320deb(0xed,'aFXl')]);else{$[_0x320deb(0x12b,'W2WZ')]=_0x112ebe[_0x128597];_0x1276f7['QVfkt'](_0x128597,_0x1276f7[_0x320deb(0xff,'LPxM')](_0x112ebe[_0x320deb(0x17c,'i12A')],0x1))?_0x128597++:_0x1276f7[_0x320deb(0xfb,'8@@o')](_0x1276f7[_0x320deb(0x128,'s1LL')],_0x1276f7[_0x320deb(0x16d,'W2WZ')])?_0x318b08=_0x1276f7['JPbGw'](_0x31206c,_0x320deb(0x19e,'aFXl')):_0x128597=0x0;$[_0x320deb(0x163,'8@@o')]=$[_0x320deb(0x19f,'CKwA')];if(cookiesArr[_0x265bb3]){const _0x1e5f97=_0x1276f7[_0x320deb(0x8f,'k9gd')][_0x320deb(0x11d,'Dtux')]('|');let _0xfa0d46=0x0;while(!![]){switch(_0x1e5f97[_0xfa0d46++]){case'0':$[_0x320deb(0xf7,'8(7E')]=_0x1276f7['yKmdb'](_0x265bb3,0x1);continue;case'1':console[_0x320deb(0x17f,'Hq9*')](_0x1276f7[_0x320deb(0x16e,'6Toe')],_0x1276f7[_0x320deb(0xd4,'LPxM')](_0x1276f7[_0x320deb(0x196,'n$nt')]($[_0x320deb(0x1a4,'cAn)')][_0x320deb(0x12a,'0CP(')](0x0,0x4),_0x320deb(0x17a,'ZhZI')),$[_0x320deb(0xdf,'NKgx')][_0x320deb(0x165,'NKgx')](-0x4)));continue;case'2':await $['wait'](0xbb8);continue;case'3':linkId=linkIdarry[_0x3d80cb[_0x16cfd4]][_0x320deb(0xf2,'6Toe')];continue;case'4':UA=yxl[_0x320deb(0xca,'JQ&p')](linkIdarry[_0x3d80cb[_0x16cfd4]]['ua']);continue;case'5':$[_0x320deb(0x97,'cAn)')]=_0x1276f7[_0x320deb(0x127,'CBgU')](decodeURIComponent,cookie[_0x320deb(0xa2,'8(7E')](/pt_pin=([^; ]+)(?=;?)/)&&cookie['match'](/pt_pin=([^; ]+)(?=;?)/)[0x1]);continue;case'6':await _0x1276f7[_0x320deb(0x136,'CKwA')](Task1);continue;case'7':$[_0x320deb(0x151,'D5Aj')]=!![];continue;case'8':cookie=cookiesArr[_0x265bb3];continue;case'9':$[_0x320deb(0x160,'6Toe')]?'':cookiesArr['splice'](_0x265bb3,0x1);continue;case'10':await $[_0x320deb(0x180,'9&55')](0xbb8);continue;case'11':UAInfo[$[_0x320deb(0x97,'cAn)')]]=UA;continue;case'12':console['log'](_0x1276f7['cgOeX'](_0x1276f7[_0x320deb(0xee,'NKgx')](_0x1276f7[_0x320deb(0xc2,'CKwA')](_0x1276f7['WZlRE'](_0x1276f7['VVzSD'],$[_0x320deb(0x84,'W2WZ')]),'】'),$[_0x320deb(0xda,'s1LL')]||$['UserName']),_0x1276f7['VeePH']));continue;case'13':$[_0x320deb(0x118,'ZhZI')]='';continue;}break;}}}}_0x1276f7[_0x320deb(0x101,'n$nt')]($[_0x320deb(0xf1,'fFOS')],0x0)?(await yxl[$[_0x320deb(0xbc,'8(7E')]?_0x1276f7[_0x320deb(0x14b,'JQ&p')]:_0x1276f7[_0x320deb(0x171,'s1LL')]]($[_0x320deb(0xd1,'3IhK')]['id'],$['TK_SIGN']['sign'],_0x3d80cb[_0x16cfd4]+_0x1276f7[_0x320deb(0x12d,'$ND^')],$[_0x320deb(0xc7,'CKwA')]),message1+=_0x320deb(0x158,'k9gd')+linkIdarry[_0x3d80cb[_0x16cfd4]][_0x320deb(0x10f,'cAn)')]+_0x320deb(0x167,'NKgx')+$[_0x320deb(0xf1,'fFOS')]+_0x320deb(0x13e,'O]DH')):_0x1276f7[_0x320deb(0x111,'Mz9U')](_0x320deb(0xd7,'6Toe'),_0x320deb(0x198,'plne'))?message2+=_0x320deb(0x89,'JQ&p')+linkIdarry[_0x3d80cb[_0x16cfd4]][_0x320deb(0xea,'plne')]+_0x320deb(0xba,'LPxM'):_0x4980aa['log']('',_0x1276f7[_0x320deb(0x15d,'D5Aj')](_0x1276f7[_0x320deb(0x178,'Ek%w')](_0x1276f7['yKmdb']('❌\x20',_0x183b94[_0x320deb(0xd2,'Ek%w')]),',\x20失败!\x20原因:\x20'),_0x21fab0)+'!','');}message1?message=message1:message=message2+'\x0a\x0a***助力全失败，不会更新店铺数据！！！！！***\x0a',await showMsg();})()[_0x2797fd(0xa3,'W2WZ')](_0x150143=>{const _0x35f340=_0x2797fd,_0x15805c={'RElEN':function(_0xc7880f,_0x2646fa){return _0xc7880f+_0x2646fa;},'WRgnQ':function(_0x50ed49,_0xe0f486){return _0x50ed49+_0xe0f486;},'EHVji':_0x35f340(0x12f,'s1LL')};$[_0x35f340(0x19a,'fFOS')]('',_0x15805c[_0x35f340(0x14c,'i12A')](_0x15805c[_0x35f340(0x15a,'Mi1E')](_0x15805c['RElEN'](_0x15805c[_0x35f340(0xd9,'oqZu')]('❌\x20',$[_0x35f340(0x1a1,']3(&')]),_0x15805c[_0x35f340(0xf5,'uJ^J')]),_0x150143),'!'),'');})[_0x2797fd(0x17d,'Hq9*')](()=>{$['done']();});async function Task1(){const _0x61355f=_0x2797fd,_0x5f5609={'CzALn':_0x61355f(0x8a,'9&55'),'EjwOK':function(_0x4973c2,_0x2e7e97){return _0x4973c2!==_0x2e7e97;},'TVpAe':_0x61355f(0xfa,'6Toe'),'eUOgy':function(_0x4abbaa,_0x47dd71){return _0x4abbaa+_0x47dd71;},'lusRM':'\x20API请求失败，请检查网路重试','IuPqh':function(_0x26c953,_0x3e141c){return _0x26c953==_0x3e141c;},'dwnjt':function(_0x1e30ef,_0x32cdbc){return _0x1e30ef===_0x32cdbc;},'rneWS':_0x61355f(0xb2,'$Kya'),'dGEbx':function(_0x593fe5,_0x5dad9d){return _0x593fe5==_0x5dad9d;},'OmFTC':'结果：助力成功！','iGNgp':_0x61355f(0x17e,'LPxM'),'wtJHp':_0x61355f(0xb6,'quOS'),'hDbaN':_0x61355f(0x95,'Xpui'),'immfh':_0x61355f(0x1a0,'fFOS'),'dRohG':'aXzSD','OJFUd':_0x61355f(0x113,'Ek%w'),'dFPTb':_0x61355f(0x177,'0Yvk'),'uweIg':_0x61355f(0x174,'r[AQ'),'LcOPM':_0x61355f(0x164,'S&f)'),'DqcsA':function(_0xe1da47,_0x40efb0){return _0xe1da47==_0x40efb0;},'yMpHE':'结果：没有助力次数！','Mzweb':_0x61355f(0x132,'CBgU'),'cHyUt':'QKNNl','zbuel':function(_0xfd40fb,_0x10c29c){return _0xfd40fb(_0x10c29c);},'fcfZt':_0x61355f(0xc0,'W2WZ')};let _0x4918ec={'linkId':linkId,'isJdApp':!![],'inviter':$['shareId']},_0x5e9ec6={'appId':_0x61355f(0xbf,'Mz9U'),'fn':_0x5f5609[_0x61355f(0x142,'8@@o')],'body':_0x4918ec,'apid':_0x61355f(0xec,'HC1L'),'ver':UA[_0x61355f(0x11d,'Dtux')](';')[0x2],'cl':_0x61355f(0xb5,'CBgU'),'user':$['UserName'],'code':0x1,'xcr':0x1,'ua':UA};return _0x4918ec=await yxllxj['getbody'](_0x5e9ec6),new Promise(async _0x352869=>{const _0x5ef0a5=_0x61355f;$[_0x5ef0a5(0xc8,'r[AQ')](_0x5f5609[_0x5ef0a5(0x19c,'CKwA')](ilIIiiil,_0x4918ec),async(_0x328343,_0xd2ab31,_0x51dff5)=>{const _0xa1c917=_0x5ef0a5,_0x407525={'tiKsC':_0x5f5609[_0xa1c917(0xf8,'CBgU')]};try{if(_0x5f5609['EjwOK'](_0xa1c917(0x10b,'*zCn'),_0x5f5609[_0xa1c917(0xfe,'0Yvk')]))_0xa7e7ea=_0x3d4a87;else{if(_0x328343)console[_0xa1c917(0x16a,'cAn)')](_0x5f5609['eUOgy']('',JSON[_0xa1c917(0x155,'uJ^J')](_0x328343))),console[_0xa1c917(0xd0,'Xpui')](_0x5f5609[_0xa1c917(0xaa,'CBgU')]);else{_0x51dff5=JSON[_0xa1c917(0x14d,'ZhZI')](_0x51dff5);if(_0x5f5609[_0xa1c917(0x147,'3IhK')](_0x51dff5[_0xa1c917(0x15b,'i12A')],0x0)){if(!_0x51dff5[_0xa1c917(0xa8,'ZSN7')][_0xa1c917(0x193,'W2WZ')]){if(_0x5f5609[_0xa1c917(0xcf,'Xpui')](_0xa1c917(0xae,'aFXl'),_0x5f5609['rneWS']))_0x26b412[_0xa1c917(0x87,'plne')]();else{$[_0xa1c917(0x188,']3(&')](_0xa1c917(0x192,'plne'));return;}}if(_0x5f5609[_0xa1c917(0xe6,'JQ&p')](_0x51dff5[_0xa1c917(0x123,'Mi1E')]['helpResult'],0x1))console[_0xa1c917(0x94,'8@@o')](_0x5f5609[_0xa1c917(0xa4,'uSKt')]),$['successhelptimes']++;else{if(_0x5f5609[_0xa1c917(0x175,'Mz9U')](_0x51dff5[_0xa1c917(0x18d,']3(&')][_0xa1c917(0xd6,'LPxM')],0x6))console['log'](_0x5f5609[_0xa1c917(0x144,'fFOS')]);else{if(_0x5f5609[_0xa1c917(0x18a,'$ND^')]!==_0x5f5609['hDbaN']){if(_0x51dff5[_0xa1c917(0x146,'cAn)')][_0xa1c917(0xac,'quOS')]==0x3)_0x5f5609[_0xa1c917(0xa7,'i12A')](_0x5f5609['immfh'],_0x5f5609[_0xa1c917(0xe0,'cAn)')])?console[_0xa1c917(0x16a,'cAn)')](_0x5f5609[_0xa1c917(0x96,'Mi1E')]):_0x4d42cc[_0xa1c917(0x148,'NKgx')]=![];else{if(_0x5f5609[_0xa1c917(0x1a2,'s1LL')]!==_0x5f5609[_0xa1c917(0x131,'9&55')]){if(_0x51dff5[_0xa1c917(0xbd,'79w6')][_0xa1c917(0x16f,'#Ru1')]==0x2)$['log'](_0x5f5609['LcOPM']);else{if(_0x51dff5['data']['helpResult']==0x8)$[_0xa1c917(0x170,'#a@x')]('结果：他还没开始新一轮！');else _0x5f5609[_0xa1c917(0x104,'Mz9U')](_0x51dff5[_0xa1c917(0xde,'0Yvk')][_0xa1c917(0x15c,'7[(#')],0x4)?$[_0xa1c917(0x14a,'0Yvk')](_0x5f5609[_0xa1c917(0x11b,'SRBp')]):console[_0xa1c917(0x179,'*zCn')](JSON[_0xa1c917(0xc6,'#a@x')](_0x51dff5));}}else _0xccbb42[_0xa1c917(0x168,'#Ru1')](_0xc89089[_0x224392]);}}else _0x3cc116['TK_SIGN']=_0xa5ea7a[_0xa1c917(0x157,'0CP(')][_0xa1c917(0x161,'k9gd')],_0x18e4a9['TK_SIGN']=_0x2de18a[_0xa1c917(0x125,']3(&')](_0x4f2c97['TK_SIGN'],_0xfd926f[_0xa1c917(0xd3,'9&55')]);}}}else _0x5f5609[_0xa1c917(0xa9,'7[(#')](_0x51dff5['code'],0x3e8)?_0x5f5609[_0xa1c917(0x107,'Hq9*')](_0x5f5609[_0xa1c917(0x137,'SRBp')],_0x5f5609[_0xa1c917(0x16c,'6Toe')])?(console['log'](_0xa1c917(0xfd,'0CP(')),$['isLogin']=![]):(_0x4af0c[_0xa1c917(0xc4,'Ek%w')](_0x407525[_0xa1c917(0xd5,'k9gd')]),_0x2619bf['isLogin']=![]):console[_0xa1c917(0xa5,'ZSN7')](_0x51dff5[_0xa1c917(0x186,'$ND^')],_0x51dff5[_0xa1c917(0x10e,'Mz9U')]);}}}catch(_0x27ae37){$[_0xa1c917(0x108,'(Eu!')](_0x27ae37,_0xd2ab31);}finally{_0x352869(_0x51dff5);}});});}function ilIIiiil(_0x16cebe){const _0x16669c=_0x2797fd,_0x1c9881={'QmkrZ':function(_0x31ee05,_0x5cdc26){return _0x31ee05+_0x5cdc26;},'DOldi':_0x16669c(0xf9,'fFOS'),'ySDuk':_0x16669c(0xf4,'Hq9*')};return{'url':_0x1c9881['QmkrZ'](_0x16669c(0xe4,'0CP('),_0x16cebe),'headers':{'Host':_0x16669c(0x197,'n$nt'),'Origin':_0x1c9881[_0x16669c(0x103,'fFOS')],'Content-Type':_0x1c9881[_0x16669c(0x13d,'CBgU')],'User-Agent':UA,'Cookie':cookie}};}function jsonParse(_0x9a7b41){const _0x4f9e19=_0x2797fd,_0x48be00={'dmUPh':function(_0x1b7724,_0x27356d){return _0x1b7724(_0x27356d);},'PxtIe':function(_0x25e8f5,_0x4502e0){return _0x25e8f5==_0x4502e0;},'livnF':'string','dNnXt':_0x4f9e19(0xbb,'plne'),'wrSBg':_0x4f9e19(0x11a,'r[AQ'),'wnAWz':_0x4f9e19(0x169,'SRBp')};if(_0x48be00[_0x4f9e19(0x140,'79w6')](typeof _0x9a7b41,_0x48be00[_0x4f9e19(0x152,'uSKt')]))try{if(_0x48be00[_0x4f9e19(0x91,'D5Aj')]===_0x48be00['wrSBg'])_0x48be00[_0x4f9e19(0x10c,'SRBp')](_0x4c995c,_0x2a08aa);else return JSON[_0x4f9e19(0xe3,'3IhK')](_0x9a7b41);}catch(_0x481d96){return console[_0x4f9e19(0xe2,'HC1L')](_0x481d96),$[_0x4f9e19(0x11c,'i12A')]($[_0x4f9e19(0xb8,'uSKt')],'',_0x48be00['wnAWz']),[];}}async function showMsg(){const _0x5980f0=_0x2797fd;$[_0x5980f0(0x187,'W2WZ')]()&&($[_0x5980f0(0xb1,'HC1L')]($[_0x5980f0(0x100,'$Kya')],'',''+message),await notify['sendNotify']($['name']+'\x20','\x0a'+message));}var version_ = 'jsjiami.com.v7';

function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
