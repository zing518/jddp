/**
 * cron: 1 0 * * *
*/
console.log('当前版本号', '20230928')
const yxl = require('./depend/yxl')
const $ = new Env('庄园助力（店铺签到专用）');
var version_='jsjiami.com.v7';const _0x25a641=_0x49d3;(function(_0x424248,_0x25ee9a,_0x4f8f8f,_0x1ae86f,_0x57885f,_0x1e7564,_0x1cd561){return _0x424248=_0x424248>>0x1,_0x1e7564='hs',_0x1cd561='hs',function(_0xd265a5,_0x2d8592,_0x128725,_0x184efb,_0x50831b){const _0x5c5cd5=_0x49d3;_0x184efb='tfi',_0x1e7564=_0x184efb+_0x1e7564,_0x50831b='up',_0x1cd561+=_0x50831b,_0x1e7564=_0x128725(_0x1e7564),_0x1cd561=_0x128725(_0x1cd561),_0x128725=0x0;const _0x23516d=_0xd265a5();while(!![]&&--_0x1ae86f+_0x2d8592){try{_0x184efb=-parseInt(_0x5c5cd5(0xfb,'V@Mi'))/0x1+-parseInt(_0x5c5cd5(0x12e,'UPf!'))/0x2+parseInt(_0x5c5cd5(0x196,'s9[B'))/0x3+parseInt(_0x5c5cd5(0x1b3,'AK!n'))/0x4+parseInt(_0x5c5cd5(0xfa,'^3Y!'))/0x5+-parseInt(_0x5c5cd5(0xa9,'s*Zx'))/0x6*(-parseInt(_0x5c5cd5(0x167,'3mYJ'))/0x7)+parseInt(_0x5c5cd5(0x18e,'3mYJ'))/0x8*(-parseInt(_0x5c5cd5(0x159,'^3Y!'))/0x9);}catch(_0x40bbec){_0x184efb=_0x128725;}finally{_0x50831b=_0x23516d[_0x1e7564]();if(_0x424248<=_0x1ae86f)_0x128725?_0x57885f?_0x184efb=_0x50831b:_0x57885f=_0x50831b:_0x128725=_0x50831b;else{if(_0x128725==_0x57885f['replace'](/[AWMylVPNIeUrkEgxpCtS=]/g,'')){if(_0x184efb===_0x2d8592){_0x23516d['un'+_0x1e7564](_0x50831b);break;}_0x23516d[_0x1cd561](_0x50831b);}}}}}(_0x4f8f8f,_0x25ee9a,function(_0x4c4df6,_0x23f1ff,_0x47f88e,_0x4a4423,_0x399dcb,_0x155df9,_0x33e597){return _0x23f1ff='\x73\x70\x6c\x69\x74',_0x4c4df6=arguments[0x0],_0x4c4df6=_0x4c4df6[_0x23f1ff](''),_0x47f88e=`\x72\x65\x76\x65\x72\x73\x65`,_0x4c4df6=_0x4c4df6[_0x47f88e]('\x76'),_0x4a4423=`\x6a\x6f\x69\x6e`,(0x143551,_0x4c4df6[_0x4a4423](''));});}(0x17c,0x459c3,_0x42b2,0xc0),_0x42b2)&&(version_=_0x42b2);const notify=$[_0x25a641(0x15d,'s9[B')]()?require(_0x25a641(0x189,'%1Jn')):'',jdCookieNode=$[_0x25a641(0x113,'8H1R')]()?require(_0x25a641(0xda,'SApH')):'',joylinkId={'wwparkcode':_0x25a641(0x169,'l4SH'),'nnparkcode':'LsQNxL7iWDlXUs6cFl-AAg'};function _0x42b2(){const _0x191c64=(function(){return[...[version_,'EPgjsWrjViIxamiU.EcpoAm.v7ySMCxltpeNlUkV==','WR0XW6xcGmozbSoLts5CWOS','aNtcOa','W4hcLdddOG','WQ7dLWeuWPtdVCoNWOFdP19O','WRlcNbVcNLf7WQe','WPbYW4H+W7u','m8kHWQCibmo5ySoS','eSkGdq','WRO1W5ZdMq','nUwjPowiO+EVRq','WQ03ACk5','lmoTvSo/AcqQWPZdSG','W4z1W6/dVmkH','WRbQW7j+W7m','WRaVAq','WPzliCkcdKdcPmopEdmMWRuzW5/cI3ZdLNRcKtn0n07cRam2msFcGxSiWPxcPq','W6S4ncy','WQ3dKdWJWPK','W4LhsSkIWPtcNHpcVSoWW4JdUY0','WPPAjCkndW','WOOtaCoHW4u','W6mMoY3cLCkiWPy','W6L3WRNdKCkknmoH','aCokW4a','imoEWQ3dG8oc','W6JdI8kwW6est8kEsG','WRmNE8kGpq','WR5pWOBdLSk4nCoA','c8k/WResl8o0F8o9ctxcVCo2','W47dKCkuW70','W5tdU8kfW4aU','W77dL3tdPSocqrnutmk/e1hdHLpcKJalfgZdNSkrWRbMFCo9WRddPg97gCoJtCkfAtFcP3RcNmooDSoNcwe','W6NdT8k4W5ys','W6tcGCkUFoISToAXQEwMQUI3V++8P+ITKUAGG+ADKoE+LUI1JoMfIEITJG','W5xdNCkFW6mpwSksw0W','WPNdT8oauW','kmoTxSovuq','WOBcULPmrW','DmkqWOzqWPFcI0rb','5yQ85yUb5BER5RUf772X','WQlcOCkyESkj','WQ0gASkFaW','WOOFW7FdQ3JcPLS','W7KR5B6N5AEb5yIq5yIvbmkZmq','WQZdJaWMWOBcTmkTW6hdO1z+jLzOWPFcMhhdLCohDmo9WRu','W7avW4G4FG','WPZdTSob','tmkcWPm','ivJcGLuP','5yMt5yUZ7765','pCkkW4tcSq','WRbmpmkInq','WQJcPCkquSk3qW','W7aBW4K/','W5OeWRW0fa','hwpdTH1aWQxdUW','nKhdOrtdMmo2Fq','g8kScSkU','WPHaW6hcTq','W6C0WOlcRda','WRKXW5ZdNfdcLxq','ArRcUeZdNmoptWq6WQK','eNldSHW','hmkLh8kHW5hcSmoQF8oPcW','W4Gsdq3cSCk+WQiF','WPmBW61yxZa','dCkmkr/cOa','gtzqW5H5WOrOWQ8','eSk4W6NcQmkHl0G','44ky5O+x56EQ44kK6kYC5ysi6iY35y+x5lUu5lIl6lE/5y+p5lQ8W4HdWRONtv9c55UJ5O2E5l+355E7WQqSEJpdUsBNMOlKU6tKUzRNROtLI5dOJOZLJOe','W4NdL8kGW6CU','W5RdLs0tWQldI0nGz8oCWQ7cLmkMwCoEWQ4','c8omW4VdQ8oUW6O','W5VdJ1NdMmoB','isHg','W4CxWQ3dSmoQWQv5WOKHWRHrWQ0','fCo+ltzN','WPdcMqOQWONdIfflvSoXWQJdMmkPamoVWQJdMd3cGv7dRmoZ','6iYk5y2U5yUdW74XxCojjq','6igb57kHwuaaWQjvaCojw3XP6i6W5y+9ogFcGcBdTCkxW6vO','WRKJBSkW','W5VdGmoPWPNcG8oIFW','W60zW4K','rSkfW67dQefjrJVdRG','jsTtW4u','BqRdU2lcKW','rSoOWQtdUSo6F1FcS09EW7pdJa','ya/dHKlcTW','kmoNxCokssi','CmkQW5Ww','dmkzWOjQ','5lIS55US5Bwg5l265BEj5ys96yo95B615A2E5zAH776JWPS','bMVdLafu','WPFdKSoYDHm','kSk+g8k9W7JcTmo3DG','imoiW7pdSCoG'],...(function(){return[...['WOxdTSorBdm','W6qBW5qU','6lYP5lQZW4vx5BA75PwX5yIb5yQB5QYr5Pws5lIW','WRlcNMzxBa','W4f6W6BdVa','CtTTrq','W58FWPK0a8o7WOiwWQddOq','zmkJW5qmW6JcQ8okWQGcnq','xmkbW6ZdVh1qAtRdPNtdN8k+','dSk3WQ4kgCoSBSo9bq','WPqjW45s','W6tcNCksWORcRcxcNZxcOJq','ovVdGrRdKmo/','q8kkW5tdUSoLW7ZcUMKKWPhdJKi','W5ayWP8','qsRdS2dcMq','ASk4W5i','WPjvW7hcOSkYW6Lj','W4ivWQRdSSkaW7LgWQOxWQm','W6XqW7NdKmka','bx/cKNa4','W4T6W7/dUa','aSkGWQmvaq','WQJdKry9WRZdQG','W6FcUIK','rbz6stK','W4LEWPyhdwjqW7RcMCkYW7ddSW','W47cS3tdL8ox','WPVdN8oYDd0','WQzsW4j4W7FdR0FdUa','A8kYWOK','tCkmWOq','WRhcMeLZEq','W5BdLCoUWPRcLSo+','W73cKspdL34','W6BcSJrTW70b','dhBcVvq8cG','6zIY5P6c56665BYwBGpdH+ENVq','W5xcMIZdUee','WP3dTmov','fmkZWQWEjCo1','schcQK8yW6NdIXtcRmo3W6dcUG','WRi9W4BdK3JcHq','W7f2WO/dGCkkm8oRAbW','ga5QW7L+WQjl','W4WwWOOPaq','fSkNWRes','umkIW58','x8kLW5NcR2z+w8k7omop','CSk2WQVdNmoj','5PwI5yU/5yUj56gi77+177+9W70','W7ZdTbyxWOO','ESowhb1YWQ/dGHBcQubdW6y','W6tcNCksWORcRcxcNW','CJ9TqbhcP1a','WRK0W6xcHCoEDmk4DXDKWQnqW4W','pmoBx8owwq','WOpcUti','bmopBvuty8k9','bgpdKcBdVCoDsI8gWOJdNuu','bmolW4hdSa','W7maW4GIDCk5W6VcHmk/','cSkpdX7cRW','BmknWR3dTCoY','W7RcOeZdSSow','uCkcWPfrWRW','CSk8W7nQW5S','D8k4W5VcNSkuW5qJstK9dSkgyW','c8oeW4hdKmob','dSkcdWK','mmkfW5pcVfiQmbO','o8odF2Cl','W4/cHc3dT0BdRmknzG','ghldQXG','qqBdS0JcTW','amo9WR4','WRKKW7zzCG','W5OZi8oB6k2x5RoO5Awe6lEw77606k2f5Qg65P6X57YR6lwM6ysz6kYF','CSoaBmoSAcur','W7BcPvBdLmoj','WP0nW5DtwIf0','WRLLW7HoW7ZdJh/dMG','W5GwWOW7','t8kHW5hcOMq','EGXCysu','W7RcPqVdJgq','WQ3cSZ7cJfm','WO3dKYiMWRa','eCo7nIbyWPZdPq','W5lcKGddNeC','W7PIWRhdKCkkmmoP','bgpdKcBdVCoDsG','kSkFW4lcUuKPpa/cVW','W5KlWO0','WRRcM2zxwq','WQBdSqRcPCoTDeZdTCkkW4u','cSo1WRLZW7W','5B+65BAn5l+U5Asg6lsE772uhW'],...(function(){return['W5eAWOS','WOhdKGaZWPi','gNlcKgy7','e3hdTrXcWQu','WPbeW6ZcPCk7','kmoNxq','W48CWQ/cQW','WP8gW5u','BCkhW6nkW54','dYPAW4fEWOb2WOa6','rdddKq','WPSyW4PtwIf0','WP5vn8kb','wmkJW7vrW4mqW4Ty','5BQS5B2w5BA35lYe5OUK5yMJ77+75Owh6lgm77YsBG','q8oRWQJdU8o8FKdcRe5HW4tdMa','W7POW67dQ8kxW6b5WPC','W7tcSCk/WRxcIW','j8oBvCo7DW','WOKjrCkcaMJcUq5sqLGt','kJ19W5Hh','bCoMWRBdHCoz','eCo7nIbyWPZdPsBcQMXtWRmMxG','dmoGWQrIW7ZcT8kH','kSkFW4lcUuKP','W7RcReS','5lM65yQb5yIu56g0WPNcTZPq','WOlLViFLPjVJGQxOT43LJRC','W4itWR3cPq','kCoKW58gW4ZcOCovWQ8kpSk7WQZcQG','WRi7W48','W4OTW5GYtW','WORcUcm','gmkaeHtcVbVdVmkusCkZemkyiYr6fmkwWOy7','uSkuWQxdJCowqCk1','W47dUCkwW4i+','WPJcHhG','dCkGW6/cG24jgZBcJWG','WQWVt8kHgG','nmkyW5C','W5ldHmo0WO3cKCkSmCoYWPnFe151WOldRfBcKZ1Ho8k8','lCoMxSoQqW','nCorgWb0','hCk4W7hcUSkDp1dcIMi','W5CLnZVcUSkDWPO9','k1VcLwC2','W4S/edJcNq','WRa1W4xdNq','WPBdSmokscZdOW','W4CcWQdcOcCGpa','WOGnW4jtwIv8WOq','kcrbW4S','BSkLW5yoW7RcQSoFWRC','WPddSYCfWRZdIComW6ddOf09','6ice57g/CMiQvCkxWP7dGCkGW7NdV+InQEwnSYlcOmo+mSosW60xqW','kSknW7pcHNi','pGf6W411','WOGwWPO5aq','WQDQW7HzW7ddIwq','WQ3cRSkywG','W6/cUsW','zH7cUKtcHSkVDsiCWOtdRgy','WQldTW3cPmkmvKFdQSkVW5yf','WRCFj8o8W4S','WRKEaCoZW5y','WPVcJgPQsa','eCoPWOtdHmo1','kCovbXrLWRm','WQ3dLWS','W6qvW44Q','W6WXWORcHXm','W4OxWQFcOZi8','W6WBW50','WP3dTmovuYi','WP/cPHVcUxLpWOtdLZG','aSocWQvaW5S','kmoIWQiuWPHf','DSkHW6K','WObiW4bK','DSkZWPVdSmo9','lCkeW7/cSK0','W6FcPd0','gCkYW7O','6k215yQP6zUD5Owg5z+CWR7cMcaKyoI/T+wgM+AJVos+H+AwLUwhTUwTNCkh5BQB6k2m6yge6l6p6iA15P6a5y6M6iYF5yYknmoTm8kTWPrK','b8o5DSo4FW','FJXrzHu','W6pcPbrLW60m','W5BdN8oN','W4tdJt0','WRjrkCklaa','WQZdNrqMWQBdUSoJWRRdRa','WOZcLmk2z8kG','5l+Q5lUA5PM15PA655AH5OME776c5PwH5Rg05BY85BEw5l+z5yQ55yI1WPi','eCo3sge/','fCkmaq'];}())];}())];}());_0x42b2=function(){return _0x191c64;};return _0x42b2();};let cookiesArr=[],cookie='';if($[_0x25a641(0x188,'^3Y!')]()){Object['keys'](jdCookieNode)['forEach'](_0x491391=>{const _0x436069=_0x25a641;cookiesArr[_0x436069(0x126,'7HAI')](jdCookieNode[_0x491391]);});if(process['env'][_0x25a641(0xac,'phlz')]&&process[_0x25a641(0x1b5,'[MJc')][_0x25a641(0x15c,'v4[W')]==='false')console[_0x25a641(0x133,'%1Jn')]=()=>{};}else cookiesArr=[$[_0x25a641(0x158,'Tq9M')](_0x25a641(0xca,'8)Dc')),$[_0x25a641(0xab,'s9[B')]('CookieJD2'),...jsonParse($[_0x25a641(0x1b2,'Kywo')](_0x25a641(0xc6,'47I('))||'[]')[_0x25a641(0x14b,'Hf0N')](_0x10e08f=>_0x10e08f['cookie'])]['filter'](_0x56a4e4=>!!_0x56a4e4);process['env'][_0x25a641(0xd3,'uow2')]&&process['env']['TK_SIGN_method']==_0x25a641(0x10c,'Xxze')?$[_0x25a641(0x15b,'JPj)')]=!![]:$[_0x25a641(0x1ac,'$Up5')]=![];if(process[_0x25a641(0xc4,'s9[B')][_0x25a641(0xe2,'xGLj')])$['TK_SIGN_ID']=process['env'][_0x25a641(0x187,'m6W&')]||'',$['TK_SIGN_SIGN']=process['env'][_0x25a641(0xd0,'7HAI')]||'',$[_0x25a641(0xb3,'uow2')]={'id':$['TK_SIGN_ID'],'sign':$[_0x25a641(0x96,'^3Y!')]};else process[_0x25a641(0xf9,'8H1R')]['TK_SIGN']?($['TK_SIGN']=process['env']['TK_SIGN'],$[_0x25a641(0x1b6,'18gK')]=$[_0x25a641(0x15e,'L^$1')]($[_0x25a641(0xb6,'^3Y!')],$[_0x25a641(0x146,'Tq9M')])):console[_0x25a641(0xc2,'s*Zx')](_0x25a641(0x16b,'Kywo'));let helpinfo={},mmshelp={};$['successhelptimes']=0x0;if(0x1)console[_0x25a641(0x170,'47I(')]=()=>{};!(async()=>{const _0x133c8f=_0x25a641,_0x4f177c={'NwHzH':_0x133c8f(0x110,'v4[W'),'ihDul':_0x133c8f(0xb5,'AK!n'),'iCvSr':'Twfrh','MlYNj':function(_0x524d0d,_0x44e263){return _0x524d0d<_0x44e263;},'CmXkx':_0x133c8f(0x18f,'3@dx'),'vKypt':function(_0x5780c9,_0x4fe9bc){return _0x5780c9+_0x4fe9bc;},'BGOQp':function(_0x3f32eb,_0x462cef){return _0x3f32eb+_0x462cef;},'rDOgB':_0x133c8f(0x14d,'s9[B'),'IoRAs':function(_0x1b064a,_0x2dd85c){return _0x1b064a(_0x2dd85c);},'pDpNH':_0x133c8f(0x1a2,'$zAV'),'TvXtc':_0x133c8f(0x138,'0WC)')};console[_0x133c8f(0xdb,'Tq9M')](typeof $[_0x133c8f(0x1b1,'m6W&')]['id'],_0x133c8f(0xf2,'*Ra5')+$['toStr']($['TK_SIGN']['id'])),await $[_0x133c8f(0x175,'SApH')](yxl[_0x133c8f(0x184,'P^FB')](0x3e8,0x1388)),$[_0x133c8f(0x131,'v4[W')]=await yxl[$[_0x133c8f(0x182,'akHW')]?_0x133c8f(0xef,'s9[B'):_0x4f177c[_0x133c8f(0x12d,'*Ra5')]](_0x133c8f(0x13c,'pZ[v'),$[_0x133c8f(0xdf,'Xxze')]['id'],$[_0x133c8f(0x120,'[MJc')][_0x133c8f(0x139,'pZ[v')]),$[_0x133c8f(0x18d,'3mYJ')]=$['toObj']($[_0x133c8f(0x16d,'dqR9')],$[_0x133c8f(0xee,'Bu3K')]);if(typeof $[_0x133c8f(0x132,'AK!n')]!=_0x133c8f(0xc0,'OR5k')){if('YMVDU'===_0x4f177c[_0x133c8f(0x13a,'pZ[v')])try{return _0x208489[_0x133c8f(0x1a9,'akHW')](_0x3972a0);}catch(_0x19b8d3){return _0x2aa145['log'](_0x19b8d3),_0x5eae46[_0x133c8f(0x10e,'8H1R')](_0x26f023[_0x133c8f(0x180,'3@dx')],'',_0x4f177c['NwHzH']),[];}else{$[_0x133c8f(0xc8,'s9[B')]=[];return;}}for(let _0x308c70=0x0;_0x4f177c[_0x133c8f(0x165,'tbmd')](_0x308c70,Object['keys'](joylinkId)['length']);_0x308c70++){_0x4f177c['CmXkx']!==_0x4f177c[_0x133c8f(0xd2,'5ZLu')]?_0x14c0ce[_0x133c8f(0x18a,'akHW')](_0x35a713[_0x133c8f(0x191,'3@dx')]):(console[_0x133c8f(0x18a,'akHW')](_0x4f177c[_0x133c8f(0xc5,'8)Dc')](_0x4f177c['BGOQp']('开始',Object['keys'](joylinkId)[_0x308c70]),_0x4f177c[_0x133c8f(0xf5,'47I(')])),await _0x4f177c['IoRAs'](dododo,Object[_0x133c8f(0x156,'3mYJ')](joylinkId)[_0x308c70]));}await yxl[$[_0x133c8f(0x183,'SApH')]?'count1':_0x4f177c[_0x133c8f(0x145,'7HAI')]]($[_0x133c8f(0xf7,'phlz')]['id'],$[_0x133c8f(0x1a8,'47I(')][_0x133c8f(0x10b,'phlz')],_0x4f177c['TvXtc'],$[_0x133c8f(0x163,'l4SH')]),await $[_0x133c8f(0x11e,'$zAV')](0x7530),process['exit'](0x0);})()[_0x25a641(0xc1,'3mYJ')](_0x965153=>{const _0xa3f70=_0x25a641;$['log']('','❌\x20'+$[_0xa3f70(0x15a,'OR5k')]+',\x20失败!\x20原因:\x20'+_0x965153+'!','');})[_0x25a641(0x154,'^3Y!')](()=>{const _0x18a66b=_0x25a641;$[_0x18a66b(0x17d,'cDM5')]();});async function dododo(_0x5bd0e6){const _0x212221=_0x25a641,_0xd0b74d={'ukCQf':function(_0x215be6,_0x8098b4){return _0x215be6(_0x8098b4);},'LPRZQ':function(_0xa5bc4,_0x1f7581){return _0xa5bc4!==_0x1f7581;},'lqzHD':_0x212221(0xdc,'cDM5'),'tiQBV':_0x212221(0x161,'AK!n'),'fUCmc':_0x212221(0x13b,'tbmd'),'YrLFi':'dvHqK','Ejxeg':function(_0x4145b9,_0x505d74){return _0x4145b9<_0x505d74;},'AFKhv':function(_0x288c0e,_0xf96092){return _0x288c0e>_0xf96092;},'ipiPq':_0x212221(0x147,'phlz'),'iYEoW':function(_0x22a412,_0x329f59){return _0x22a412===_0x329f59;},'sCBDH':'vQjCW','PNDEv':_0x212221(0xaf,'Kywo'),'HTHRc':function(_0x1c825c,_0x27c058){return _0x1c825c+_0x27c058;},'RjEoa':'wwparkcode','ledZj':'wSNkY','fsDnp':_0x212221(0xea,'D%kj'),'NAQbt':function(_0x17de5c,_0x4d212d){return _0x17de5c+_0x4d212d;},'jRGkm':function(_0x4a1ae3,_0x3eb845){return _0x4a1ae3+_0x3eb845;},'KdzAK':function(_0x3f8195,_0x139f12){return _0x3f8195(_0x139f12);},'aHwgp':_0x212221(0x1a1,'pZ[v'),'cSotL':function(_0x550e7d,_0x43999c,_0x4ecc7c){return _0x550e7d(_0x43999c,_0x4ecc7c);},'AqzEy':function(_0x5f27e8,_0x512fb3){return _0x5f27e8*_0x512fb3;},'Dgrln':function(_0xdb017b,_0x53ef62){return _0xdb017b*_0x53ef62;},'Iotua':_0x212221(0x1ae,'v4[W')};$[_0x212221(0x193,'*Ra5')]=joylinkId[_0x5bd0e6],$[_0x212221(0xbd,'akHW')]=$[_0x212221(0xd4,'nsB@')][_0x5bd0e6],$[_0x212221(0x11d,'D%kj')]=$[_0x212221(0x10d,'xGLj')]($[_0x212221(0x123,'JPj)')],$[_0x212221(0xe1,'o3Bu')]),$[_0x212221(0x1a7,'AK!n')]=$['mms'][_0x212221(0xa3,'$zAV')],$[_0x212221(0x19a,'Xxze')]=$[_0x212221(0xa6,'nsB@')]['code'],$[_0x212221(0x106,'O8pX')]=[],console['info'](_0x212221(0x16a,'pZ[v')+$[_0x212221(0x162,'pZ[v')]($[_0x212221(0xd6,'V@Mi')]));if($[_0x212221(0x115,'l4SH')]['length']===0x0){if(_0xd0b74d[_0x212221(0xb0,'$zAV')](_0xd0b74d['lqzHD'],_0x212221(0x179,'O8pX')))return;else _0x4968bf['log'](_0x212221(0xf3,'18gK'));}if(!cookiesArr[0x0]){$[_0x212221(0x18c,'SApH')]($['name'],_0xd0b74d[_0x212221(0x1ad,'Xxze')],_0xd0b74d[_0x212221(0x134,'5ZLu')],{'open-url':'https://bean.m.jd.com/bean/signIndex.action'});return;}for(let _0x33f9ce=0x0;_0x33f9ce<cookiesArr[_0x212221(0x104,'Bu3K')];_0x33f9ce++){_0xd0b74d['LPRZQ'](_0xd0b74d[_0x212221(0x197,'V@Mi')],_0xd0b74d['YrLFi'])?_0x272191['changeplan']=![]:cookiesArr[_0x33f9ce]&&(cookie=cookiesArr[_0x33f9ce],$[_0x212221(0x142,'Hf0N')]=_0xd0b74d['ukCQf'](decodeURIComponent,cookie['match'](/pt_pin=([^; ]+)(?=;?)/)&&cookie[_0x212221(0x12f,'d$dx')](/pt_pin=([^; ]+)(?=;?)/)[0x1]),helpinfo[$[_0x212221(0x17a,'JPj)')]]={});}for(let _0x64a92e=0x0;_0xd0b74d[_0x212221(0x116,'d$dx')](_0x64a92e,$['mms'][_0x212221(0x19d,'dqR9')]);_0x64a92e++){mmshelp[$[_0x212221(0x12a,'7HAI')][_0x64a92e]]={};}if(_0xd0b74d[_0x212221(0x157,'Bu3K')]($['mms'][_0x212221(0x150,'aPY6')],0x0)){console[_0x212221(0x114,'dqR9')](_0xd0b74d[_0x212221(0x9d,'8)Dc')]);for(let _0x51e89d=0x0;_0x51e89d<cookiesArr[_0x212221(0x19f,'8H1R')];_0x51e89d++){if(cookiesArr[_0x51e89d]){if(_0xd0b74d[_0x212221(0xa5,'$Gse')](_0xd0b74d['sCBDH'],_0xd0b74d[_0x212221(0x168,'uow2')]))_0xd0b74d[_0x212221(0xbf,'D%kj')](_0x16949c,_0xdbbfb8);else{cookie=cookiesArr[_0x51e89d],$[_0x212221(0x135,'pZ[v')]=_0xd0b74d['ukCQf'](decodeURIComponent,cookie['match'](/pt_pin=([^; ]+)(?=;?)/)&&cookie['match'](/pt_pin=([^; ]+)(?=;?)/)[0x1]),$[_0x212221(0xe6,'s*Zx')]=_0xd0b74d[_0x212221(0x118,'aPY6')](_0x51e89d,0x1),$['UA']=yxl[_0x212221(0xbb,'nsB@')](_0x5bd0e6==_0xd0b74d['RjEoa']?0x0:0x1),console['log'](_0x212221(0xd8,'AK!n')+$[_0x212221(0x128,'3@dx')]+'】'+($['nickName']||$[_0x212221(0x199,'phlz')]));for(let _0x2370c1=0x0;_0xd0b74d[_0x212221(0xbe,'*Ra5')](_0x2370c1,$[_0x212221(0x166,'47I(')][_0x212221(0x100,'uow2')]);_0x2370c1++){if(_0xd0b74d['LPRZQ'](_0xd0b74d[_0x212221(0x140,'s*Zx')],_0xd0b74d[_0x212221(0x152,'akHW')])){console['log'](_0xd0b74d['NAQbt'](_0xd0b74d['jRGkm'](_0x212221(0x125,'$Up5')+_0xd0b74d[_0x212221(0x14c,'D%kj')](_0x2370c1,0x1)+_0x212221(0xd7,'^3Y!'),$['mms'][_0x2370c1][_0x212221(0xae,'$Up5')](0x0,0x4))+_0x212221(0xb8,'phlz'),$[_0x212221(0x1a3,'O8pX')][_0x2370c1][_0x212221(0x99,'L^$1')](-0x4)));if(helpinfo[$['UserName']]['nohelp']){console[_0x212221(0xdd,'[MJc')](_0x212221(0x17e,'O8pX'));break;};await _0xd0b74d[_0x212221(0x19e,'$zAV')](kgwhelp,$[_0x212221(0x10a,'8)Dc')][_0x2370c1]),console[_0x212221(0x1ab,'$Up5')](_0xd0b74d['aHwgp']),await $[_0x212221(0xa0,'L^$1')](_0xd0b74d[_0x212221(0xcf,'s*Zx')](parseInt,_0xd0b74d[_0x212221(0x9a,'Xxze')](_0xd0b74d['AqzEy'](Math[_0x212221(0x1a4,'0WC)')](),0x7d0),0x7d0),0xa)),await _0xd0b74d[_0x212221(0xb1,'[MJc')](help,$[_0x212221(0x194,'8H1R')][_0x2370c1]),console['log'](_0xd0b74d['aHwgp']),await $['wait'](_0xd0b74d[_0x212221(0x121,'phlz')](parseInt,_0xd0b74d[_0x212221(0xce,'m6W&')](Math['random'](),0x7d0)+0x7d0,0xa));}else _0x4e5d61?(_0x37e138[_0x212221(0x105,'cDM5')](''+_0x784804['stringify'](_0x3e0d58)),_0x476fa2[_0x212221(0x19b,'Hf0N')](_0x199614['name']+_0x212221(0x13d,'aPY6'))):_0x447aab=_0x557fb6[_0x212221(0xe7,'uow2')](_0x10ad16);}$[_0x212221(0x16e,'cDM5')]=await different($['mms'],$['mmsok']);}}}}else console[_0x212221(0x10f,'qHyX')](_0xd0b74d['Iotua']);}function _0x49d3(_0x12d277,_0x494905){const _0x42b2ca=_0x42b2();return _0x49d3=function(_0x49d3a9,_0x2ab6b8){_0x49d3a9=_0x49d3a9-0x96;let _0x9f5c0c=_0x42b2ca[_0x49d3a9];if(_0x49d3['KxhFEP']===undefined){var _0x59508e=function(_0x21f466){const _0x4cdb18='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x273b6d='',_0x1e7373='';for(let _0x2fc82b=0x0,_0x125587,_0x2e925c,_0x493a5b=0x0;_0x2e925c=_0x21f466['charAt'](_0x493a5b++);~_0x2e925c&&(_0x125587=_0x2fc82b%0x4?_0x125587*0x40+_0x2e925c:_0x2e925c,_0x2fc82b++%0x4)?_0x273b6d+=String['fromCharCode'](0xff&_0x125587>>(-0x2*_0x2fc82b&0x6)):0x0){_0x2e925c=_0x4cdb18['indexOf'](_0x2e925c);}for(let _0x2284ad=0x0,_0x4d6194=_0x273b6d['length'];_0x2284ad<_0x4d6194;_0x2284ad++){_0x1e7373+='%'+('00'+_0x273b6d['charCodeAt'](_0x2284ad)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1e7373);};const _0x5cdab8=function(_0x1e25e1,_0x4e9609){let _0x27593e=[],_0xd84ff9=0x0,_0x16161d,_0xb24622='';_0x1e25e1=_0x59508e(_0x1e25e1);let _0x538fe9;for(_0x538fe9=0x0;_0x538fe9<0x100;_0x538fe9++){_0x27593e[_0x538fe9]=_0x538fe9;}for(_0x538fe9=0x0;_0x538fe9<0x100;_0x538fe9++){_0xd84ff9=(_0xd84ff9+_0x27593e[_0x538fe9]+_0x4e9609['charCodeAt'](_0x538fe9%_0x4e9609['length']))%0x100,_0x16161d=_0x27593e[_0x538fe9],_0x27593e[_0x538fe9]=_0x27593e[_0xd84ff9],_0x27593e[_0xd84ff9]=_0x16161d;}_0x538fe9=0x0,_0xd84ff9=0x0;for(let _0x3599aa=0x0;_0x3599aa<_0x1e25e1['length'];_0x3599aa++){_0x538fe9=(_0x538fe9+0x1)%0x100,_0xd84ff9=(_0xd84ff9+_0x27593e[_0x538fe9])%0x100,_0x16161d=_0x27593e[_0x538fe9],_0x27593e[_0x538fe9]=_0x27593e[_0xd84ff9],_0x27593e[_0xd84ff9]=_0x16161d,_0xb24622+=String['fromCharCode'](_0x1e25e1['charCodeAt'](_0x3599aa)^_0x27593e[(_0x27593e[_0x538fe9]+_0x27593e[_0xd84ff9])%0x100]);}return _0xb24622;};_0x49d3['EGmBKV']=_0x5cdab8,_0x12d277=arguments,_0x49d3['KxhFEP']=!![];}const _0x5647e4=_0x42b2ca[0x0],_0x599f5c=_0x49d3a9+_0x5647e4,_0x408d1c=_0x12d277[_0x599f5c];return!_0x408d1c?(_0x49d3['GYTMKx']===undefined&&(_0x49d3['GYTMKx']=!![]),_0x9f5c0c=_0x49d3['EGmBKV'](_0x9f5c0c,_0x2ab6b8),_0x12d277[_0x599f5c]=_0x9f5c0c):_0x9f5c0c=_0x408d1c,_0x9f5c0c;},_0x49d3(_0x12d277,_0x494905);}async function kgwhelp(_0x155b5b){const _0xd9f6b1=_0x25a641,_0x18a2ea={'sAeQb':function(_0x2de414,_0x3be921,_0x7c516,_0x1b1fed){return _0x2de414(_0x3be921,_0x7c516,_0x1b1fed);},'IiBqi':function(_0x5f121d,_0x2c2284){return _0x5f121d===_0x2c2284;},'sSQWy':_0xd9f6b1(0xcb,'v4[W'),'GwmLR':function(_0x2715ab,_0x1ff25d){return _0x2715ab===_0x1ff25d;},'Madjn':'UWLrj','kfHBe':_0xd9f6b1(0xbc,'s9[B')};let _0x47f81d=await _0x18a2ea[_0xd9f6b1(0xe0,'pZ[v')](getJoyBaseInfo,undefined,0x2,_0x155b5b);if(_0x47f81d[_0xd9f6b1(0x181,'Kywo')]&&_0x47f81d[_0xd9f6b1(0xa4,'OR5k')][_0xd9f6b1(0xe8,'qHyX')]&&_0x18a2ea[_0xd9f6b1(0xeb,'v4[W')](_0x47f81d[_0xd9f6b1(0x14e,'xGLj')]['helpState'],0x1))console[_0xd9f6b1(0x97,'%1Jn')](_0x18a2ea[_0xd9f6b1(0x141,'o3Bu')]);else{if(_0x47f81d[_0xd9f6b1(0x124,'Tq9M')]&&_0x47f81d[_0xd9f6b1(0x102,'cDM5')]['helpState']&&_0x18a2ea[_0xd9f6b1(0x17f,'o3Bu')](_0x47f81d[_0xd9f6b1(0xad,'akHW')][_0xd9f6b1(0x185,'0WC)')],0x3))_0x18a2ea['GwmLR'](_0x18a2ea['Madjn'],_0x18a2ea['Madjn'])?console['info'](_0xd9f6b1(0x119,'8H1R')):_0x12bf7d['done']();else _0x47f81d[_0xd9f6b1(0x155,'JPj)')]&&_0x47f81d[_0xd9f6b1(0x102,'cDM5')][_0xd9f6b1(0x16f,'P^FB')]&&_0x18a2ea[_0xd9f6b1(0x14f,'d$dx')](_0x47f81d[_0xd9f6b1(0x191,'3@dx')][_0xd9f6b1(0x13e,'pZ[v')],0x2)?console[_0xd9f6b1(0xc9,'d$dx')](_0xd9f6b1(0x177,'s9[B')):console[_0xd9f6b1(0xc3,'Bu3K')](_0x18a2ea[_0xd9f6b1(0x112,'Kywo')]);}}async function help(_0x5f3bca){const _0xd635f=_0x25a641,_0x5dbd8f={'tTCjp':function(_0x529064,_0x146580,_0x291e31,_0x37bb53){return _0x529064(_0x146580,_0x291e31,_0x37bb53);},'oRhFF':_0xd635f(0x143,'Kywo'),'MmTnk':function(_0x1bb0e4,_0x735001){return _0x1bb0e4===_0x735001;},'seTVO':function(_0x1464b6,_0x57183f){return _0x1464b6===_0x57183f;},'CLUnI':function(_0x2322dc,_0x89e6){return _0x2322dc!==_0x89e6;},'eHZAm':_0xd635f(0x195,'Kywo'),'PkPti':'今日无助力次数了！','draoK':'助力成功😜！','CKUtJ':function(_0x12854f,_0x1fcd01){return _0x12854f===_0x1fcd01;},'adnEw':'QtdZV','jfAGe':_0xd635f(0xff,'5ZLu'),'xSeYb':function(_0x4610e8,_0xb615a6){return _0x4610e8===_0xb615a6;},'sfCVU':'yWAKF','snGxs':'数据异常\x20助力失败！\x0a'};let _0x40f78b=await _0x5dbd8f['tTCjp'](getJoyBaseInfo,$[_0xd635f(0x107,'[MJc')],'1',_0x5f3bca);if(_0x40f78b['success']){console[_0xd635f(0x13f,'O8pX')](_0x40f78b[_0xd635f(0x176,'4A2d')][_0xd635f(0x127,'s*Zx')]);if(_0x40f78b[_0xd635f(0xf0,'47I(')][_0xd635f(0x117,'*Ra5')]===0x4)console['log'](_0x5dbd8f[_0xd635f(0x108,'nsB@')]),$['mmsok'][_0xd635f(0x1aa,'0WC)')](_0x5f3bca);else{if(_0x5dbd8f[_0xd635f(0xfc,'UPf!')](_0x40f78b[_0xd635f(0x16c,'7HAI')]['helpState'],0x0))$[_0xd635f(0x14a,'O8pX')]('自己不能助力自己！');else{if(_0x5dbd8f['seTVO'](_0x40f78b[_0xd635f(0x124,'Tq9M')]['helpState'],0x2)){if(_0x5dbd8f[_0xd635f(0xa7,'s9[B')](_0x5dbd8f['eHZAm'],_0x5dbd8f['eHZAm'])){_0x59d3ba[_0xd635f(0x153,'OR5k')]=[];return;}else console[_0xd635f(0x11b,'L^$1')]('你已助力过TA！'),helpinfo[$[_0xd635f(0xcd,'3@dx')]]['nohelp']=0x1;}else{if(_0x5dbd8f['MmTnk'](_0x40f78b[_0xd635f(0xd9,'Bu3K')]['helpState'],0x3))console[_0xd635f(0xdb,'Tq9M')](_0x5dbd8f['PkPti']),helpinfo[$['UserName']]['nohelp']=0x1;else _0x5dbd8f[_0xd635f(0x17b,'%1Jn')](_0x40f78b['data']['helpState'],0x1)?(console[_0xd635f(0x11b,'L^$1')](_0x5dbd8f[_0xd635f(0x192,'0WC)')]),$['successhelptimes']++,helpinfo[$['UserName']]['nohelp']=0x1):_0x5dbd8f[_0xd635f(0x129,'phlz')](_0x5dbd8f[_0xd635f(0xaa,'V@Mi')],_0x5dbd8f[_0xd635f(0x190,'D%kj')])?_0x28871b=_0x45e24c[_0xd635f(0x9c,'Hf0N')](_0x5869a2):console['log'](_0x40f78b['data']);}}}}else{if(_0x5dbd8f[_0xd635f(0x1b4,'s*Zx')](_0x5dbd8f[_0xd635f(0xf4,'xGLj')],_0xd635f(0x198,'O8pX')))return _0x36840a[_0xd635f(0x1a0,'D%kj')](_0x59162d)[_0xd635f(0x164,'%1Jn')](_0x50f90b=>_0x3136f1[_0xd635f(0xf1,'SApH')](_0x50f90b)&&!_0x1f6498[_0xd635f(0xa1,'xGLj')](_0x50f90b));else $['log'](_0x5dbd8f['snGxs']),console[_0xd635f(0x12c,'v4[W')](JSON[_0xd635f(0xb7,'xGLj')](_0x40f78b)),helpinfo[$[_0xd635f(0xe9,'v4[W')]]['nohelp']=0x1;}}async function getJoyBaseInfo(_0x1e2aea='',_0xc591ed='',_0x5c200c=''){const _0x3aabe4=_0x25a641,_0x4f1fe0={'SJzpr':function(_0x2c77f0,_0x45ddf4){return _0x2c77f0(_0x45ddf4);},'vqDsB':_0x3aabe4(0xb2,'*Ra5'),'Prgzy':'bjkdT'};let _0x443575={'taskId':_0x1e2aea,'inviteType':_0xc591ed,'inviterPin':_0x5c200c,'linkId':$[_0x3aabe4(0x1a6,'Tq9M')]},_0x27b5e6=await taskPostUrl(_0x443575);return await $[_0x3aabe4(0x175,'SApH')](0x7d0),new Promise(_0xa4b319=>{const _0x1cf2b6=_0x3aabe4;$[_0x1cf2b6(0x151,'cDM5')](_0x27b5e6,async(_0x539d88,_0x458002,_0x43be43)=>{const _0x133e1e=_0x1cf2b6,_0x6c59e8={'zxKxu':function(_0x2685d9,_0x82e49b){return _0x4f1fe0['SJzpr'](_0x2685d9,_0x82e49b);}};try{_0x539d88?(console[_0x133e1e(0xc7,'$Gse')](''+JSON[_0x133e1e(0x98,'cDM5')](_0x539d88)),console['log']($[_0x133e1e(0xec,'Tq9M')]+_0x133e1e(0xa8,'UPf!'))):_0x4f1fe0['vqDsB']!==_0x4f1fe0['Prgzy']?_0x43be43=JSON[_0x133e1e(0x149,'cDM5')](_0x43be43):_0x34d8c1[_0x4bf772]&&(_0x41534f=_0x25fed4[_0x41735f],_0x47193a[_0x133e1e(0x122,'0WC)')]=_0x6c59e8[_0x133e1e(0x178,'OR5k')](_0x2eb9d3,_0x1bb851['match'](/pt_pin=([^; ]+)(?=;?)/)&&_0x451b74[_0x133e1e(0x9b,'V@Mi')](/pt_pin=([^; ]+)(?=;?)/)[0x1]),_0x307a4b[_0x454aef[_0x133e1e(0x15f,'47I(')]]={});}catch(_0x38758c){$[_0x133e1e(0x174,'s*Zx')](_0x38758c,_0x458002);}finally{_0xa4b319(_0x43be43);}});});}async function taskPostUrl(_0x14f9d9,_0x2432c4){const _0x565221=_0x25a641,_0x533a4d={'uowPz':_0x565221(0xf6,'akHW'),'dgYJr':_0x565221(0x11f,'*Ra5'),'fxHrp':_0x565221(0xde,'L^$1'),'DqBhG':_0x565221(0x109,'8)Dc'),'Aszge':_0x565221(0x101,'*Ra5'),'CqLwD':function(_0x441788,_0x257830){return _0x441788<_0x257830;},'Clrav':_0x565221(0xe5,'dqR9'),'OrmLg':_0x565221(0x1b0,'uow2'),'JCCCU':_0x565221(0x12b,'d$dx'),'gvhdM':'api.m.jd.com'};let _0x23ea29='',_0x1e1e2f={'appId':_0x533a4d[_0x565221(0x17c,'O8pX')],'fn':_0x533a4d[_0x565221(0xb4,'$zAV')],'body':_0x14f9d9,'apid':_0x533a4d[_0x565221(0xd1,'47I(')],'ver':_0x533a4d[_0x565221(0x19c,'o3Bu')],'cl':_0x533a4d[_0x565221(0x11a,'18gK')],'user':$['UserName'],'code':0x0,'ua':$['UA']};for(let _0x4bce50=0x0;_0x533a4d[_0x565221(0x111,'s*Zx')](_0x4bce50,0x5);_0x4bce50++){_0x23ea29=await yxl[_0x565221(0x160,'qHyX')](_0x1e1e2f);if(_0x23ea29)break;}if(!_0x23ea29)return;let _0xa72933={'url':_0x533a4d[_0x565221(0xfd,'UPf!')]+(_0x2432c4?_0x533a4d[_0x565221(0xb9,'o3Bu')]+_0x2432c4:''),'body':_0x23ea29,'headers':{'User-Agent':$['UA'],'Content-Type':_0x533a4d[_0x565221(0x103,'Bu3K')],'Host':_0x533a4d['gvhdM'],'Origin':_0x565221(0x148,'*Ra5'),'Referer':'https://joypark.jd.com/','Cookie':cookie}};return _0xa72933;}function different(_0x505b0a,_0x648daf){const _0x5db60d=_0x25a641;return _0x505b0a['concat'](_0x648daf)[_0x5db60d(0xed,'O8pX')](_0x1a66e2=>_0x505b0a['includes'](_0x1a66e2)&&!_0x648daf['includes'](_0x1a66e2));}function jsonParse(_0x4e5a8d){const _0x1be074=_0x25a641,_0x12bf27={'EUMEs':'帮开工位成功，感谢！\x0a','HPpeW':function(_0x3be5db,_0x212d14){return _0x3be5db==_0x212d14;},'qmUpQ':_0x1be074(0xd5,'xGLj'),'UTXgM':function(_0xfd844,_0x183dd7){return _0xfd844===_0x183dd7;},'fafOJ':_0x1be074(0xa2,'18gK'),'iuEGy':_0x1be074(0x136,'7HAI')};if(_0x12bf27[_0x1be074(0x173,'$Gse')](typeof _0x4e5a8d,_0x12bf27[_0x1be074(0xe3,'7HAI')]))try{if(_0x12bf27[_0x1be074(0x1af,'l4SH')](_0x12bf27[_0x1be074(0x9f,'%1Jn')],_0x12bf27[_0x1be074(0x144,'aPY6')]))return JSON[_0x1be074(0x130,'UPf!')](_0x4e5a8d);else _0x1f66fc[_0x1be074(0xf8,'aPY6')](_0x12bf27[_0x1be074(0x171,'$Gse')]);}catch(_0x5268f8){if(_0x12bf27[_0x1be074(0x18b,'$Gse')]===_0x1be074(0xfe,'o3Bu'))return console[_0x1be074(0x1ab,'$Up5')](_0x5268f8),$[_0x1be074(0xe4,'xGLj')]($[_0x1be074(0x186,'s9[B')],'','请勿随意在BoxJs输入框修改内容\x0a建议通过脚本去获取cookie'),[];else return;}}var version_ = 'jsjiami.com.v7';

function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
