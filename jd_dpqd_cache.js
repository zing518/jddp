/**
 * cron: 30 11,23 * * *
*/


const $ = new Env('缓存店铺数据');

var _0xodR='jsjiami.com.v6',_0xodR_=function(){return['‮_0xodR'],_0xf68d=[_0xodR,'CcOrDRgM','bWRyw71mOxQ=','w6hFw7xmwqk=','w7zDh8OyworCnA==','c8O1w4HCmnbCqXHCtw==','wqHDgcOowobClw==','a8KbN8KZw5g=','SWHCm8Kvwp1C','wrA9OSEmw73DiCA=','PFrClcKZwpk=','MsK2ekvDgw==','wpF1Q1TCrTXDjw==','DcOWBT8e','Nj/CpsK3wpI=','NEfCuirCrQ==','CxdhwqgV','LxFkwqsX','wp/CoX1wMQ==','DcOgwr5HPA==','H2rDqMOqwo4=','w414CMKBw5s=','w6xLw51hwr4YwpzDgg==','CMOoe2A=','MiTDrMKrwqxnw7dSwp0Sw5tsABc=','5b6M5Ym654qX5p625Y6n','c8KmwpBDJE/CvsOYKcOKwpHCnQ==','EsKvY8KIScKa','a3how79rJE3DtsKNEcK/w4HCjh1jbcK2TQ==','AGXCgcKQ','wpd/w6XDtz3CtQbDrHlN','wqh6w6PClcOQPDTDhnQ=','w5Uaw7LCt33mjobpuq3orLvlr43ml6jotIzkuJDmrb/DnX4tXAfCtWbCp8KG5Lm26KeR5pa25a+45pehFMKowq3DoMKwAA==','Q23Chw==','DzV0wpo0wp/Dtmwdw7cVGlzCtQ==','wr8jwrxewpzDvibCjMKGwp7CtsO3IsOi','ZMOyw7PCgGPCpW/CvMKYCA==','w4rCksOY','LcK9esOZSj3CjsKlQcOL','EsOow49pw4Nfwrgww6bDug==','csOuakPDvQFHFXhr','NMKoSXrDpmgfUWbCr8OYwoA=','w4EiHg==','U8ORw43CvU3Ch1HCj8KqL8KQfw==','w4xvw5FGwoU2wrzDusOgw5PDs8K/','PcOdWsKXwqHCuMOr','VMKVK8KCw5DCmwo=','w71Kw7g=','eMKHFsOMTMKWXA==','w4PDhHDCvMO1X3Q=','w6zDmHs=','wpV9a8OYXsOLMGDDknfDvcKsw4As','ZsOpYUHDsBJTKF5b5Y+e6YGQfCp2w6xJw47DlTI4ZMON5pyk6KyMYOiMruWMvsKHw5djwpJkwoMscQ==','UmrCnMKv','wrjCkTF1CcO6w5rDrzoLwoDCom0l','5b+c5Yumw5LCreWMjg==','w5TDvEMWFcOheA==','wojDo8K8d2bDlA==','5paN5oy65qKb5byp6Z2PN3rDvTh4Ee++r+mXoOiss++9lu+/pw==','BMKTZ00=','RUdOw6t7','wqVyPcOSew==','5pmh5peu56+k5Yqp5pab5o2Q57+K5a285oqi5Yud77yu77+e','w5tbwqbCukI=','CnHCuy7Cm8KzC1rCusK/awQ=','wrnCk8OYCy8=','LsO7Y19n','wqkfw7h1WB9W','wqJbaGPChQbDoFgpAMK2','DcOWGSkG','worCi8K8woN0fcOyb0sx','DH7DmMOawr0=','woJ5WlU=','w5R/KsKsw6Y=','w4JtGcKqw4vCmMOUw5bCkW4=','wp8Bwo5o','WnBkw5V8','5Lml5pSZ5bWc572O5a6X','wpbDvsKxw6kzM8KdwoDDgD0=','LDNmw4TDvw==','VsOFw5M9LA==','A2TDvQ==','d8OlwoHCmA==','wrzCv8OjED0=','5Lus5pem5p+b57+Z5a6m5pWG5o6V772C5b6h5aaK57+M5a6F7763','bMK/I8K8w60=','w4fCrMObPMK/','w6xLw4F3wqY=','VELDvAbDhg==','w69Fw6dh','w4pVwr3CsFl9Nz9mw5ZQwoI=','HcOfdcKAwpI=','TcK8IMO7ZMKlcw==','EcKmUMOrcw==','DH3Cpz4=','FcOiw7RVw5g=','XWLDoAPDl8OtOA==','w45aKcKqw4A=','wq4Vw4NJQw==','w6HDh3UhPcOSVw==','wqLCjsKdwrhU','GWTCoz/Cn8K0Hg==','dMKxO8Kzw7M=','GxzCv8KiwqApw6U=','bHpgw6tAIg7DusKR','ZsOqw7vCimXCtH4=','EHzCncKRwpXDqcKnw7TChw==','worDoMKucWTDgwtUwojCtcK7UWg=','DsO5QU9q','wp3Cg8Kywo4=','woNjZ17ChA==','bMOawr/ClcKU','GsOYKTURX8K5OsO0w7g=','w4LDknDDtcK4','w7vDgsO2wow=','DMOKGjM8','w67Dug3DrRk=','GCRjw7nDrzpHTMKIw6c=','wobDscK/dmTDlAI=','FXXCsjjCn8KjF0vCp8K7YxLCnw==','F2TCjcKbwq3DpcK5w77CiRo=','MDnCrMKiwqo=','w73Dox8nTg==','DzV0wpo0wp/Dtg==','X8KlLsOx','X3x3w5pq','RMO2wqbCksKQ','McOmwpM=','HcO/aMKh','w6fCtMKUMMKiXsKbHMONw6x1dgXCvw==','b1PDrQjDpA==','wr5HwrbDvjHDuxQ=','BsOAVsKswoY=','w41aIMOcPA==','HcOxf2Flwow/','w716MMOQBg==','wrQE5aa/6LSww61R5Y2t5ZmFwonCug==','wocHwoQ=','N8K0f0PDog==','wpvDvsK/w6Q=','w73DrVfDiMKq','wpPDtsK8w6A6K8KN','w6TDmHIg','DsOkd2Flwog3','YsOYw6bCmVU=','w7TDp07CgcObfUoLw4LCqg==','w6pBw69xwq0BwpvClA==','wrnCrMKqwoJl','w6HDmANDwos=','VmBlN8K/w78Y','CsKfQsOk','wo/CtcO/Lj8gJQ==','dkR1BsKc','w5vDvQPDkzPCrMKs','FXzChcKRwqvDtMKo','wpwkw45CcCx5','PsO8fMKjwpI=','W8KtIMOr','wq9UP8ORXMKcDWbCkUbCtcOz','wrRGH8OaV8KU','S3DClg==','w4bDsiZiwosaw7vDoEJY','w5ZVwr7CsQ==','aX5gAsKS','wrwewrJPwpM=','GsKZasOGbg==','PxjLJsjiamiz.comyz.Egvqd6rQf=='];}();if(function(_0xb9c72a,_0x14bd20,_0x2e6ad5){function _0x3983e8(_0xbeb5ef,_0x47e6db,_0x35e3e4,_0x1f7f0f,_0x1161f3,_0x102e9a){_0x47e6db=_0x47e6db>>0x8,_0x1161f3='po';var _0x156360='shift',_0x5c12a8='push',_0x102e9a='‮';if(_0x47e6db<_0xbeb5ef){while(--_0xbeb5ef){_0x1f7f0f=_0xb9c72a[_0x156360]();if(_0x47e6db===_0xbeb5ef&&_0x102e9a==='‮'&&_0x102e9a['length']===0x1){_0x47e6db=_0x1f7f0f,_0x35e3e4=_0xb9c72a[_0x1161f3+'p']();}else if(_0x47e6db&&_0x35e3e4['replace'](/[PxLJzyzEgqdrQf=]/g,'')===_0x47e6db){_0xb9c72a[_0x5c12a8](_0x1f7f0f);}}_0xb9c72a[_0x5c12a8](_0xb9c72a[_0x156360]());}return 0x140f34;};return _0x3983e8(++_0x14bd20,_0x2e6ad5)>>_0x14bd20^_0x2e6ad5;}(_0xf68d,0xbb,0xbb00),_0xf68d){_0xodR_=_0xf68d['length']^0xbb;};function _0x567e(_0x284512,_0x5461e9){_0x284512=~~'0x'['concat'](_0x284512['slice'](0x1));var _0x43967c=_0xf68d[_0x284512];if(_0x567e['YPqfJl']===undefined){(function(){var _0x1d5a00=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x200b67='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x1d5a00['atob']||(_0x1d5a00['atob']=function(_0x3cad61){var _0x4148a6=String(_0x3cad61)['replace'](/=+$/,'');for(var _0x4845a5=0x0,_0x4c85eb,_0x2ba6c5,_0x3e2519=0x0,_0x58418f='';_0x2ba6c5=_0x4148a6['charAt'](_0x3e2519++);~_0x2ba6c5&&(_0x4c85eb=_0x4845a5%0x4?_0x4c85eb*0x40+_0x2ba6c5:_0x2ba6c5,_0x4845a5++%0x4)?_0x58418f+=String['fromCharCode'](0xff&_0x4c85eb>>(-0x2*_0x4845a5&0x6)):0x0){_0x2ba6c5=_0x200b67['indexOf'](_0x2ba6c5);}return _0x58418f;});}());function _0x2f0610(_0x42755a,_0x5461e9){var _0x496d5a=[],_0x3402e3=0x0,_0x335fcc,_0x56d74e='',_0x3cb611='';_0x42755a=atob(_0x42755a);for(var _0x2e188d=0x0,_0x9d766e=_0x42755a['length'];_0x2e188d<_0x9d766e;_0x2e188d++){_0x3cb611+='%'+('00'+_0x42755a['charCodeAt'](_0x2e188d)['toString'](0x10))['slice'](-0x2);}_0x42755a=decodeURIComponent(_0x3cb611);for(var _0x3a6176=0x0;_0x3a6176<0x100;_0x3a6176++){_0x496d5a[_0x3a6176]=_0x3a6176;}for(_0x3a6176=0x0;_0x3a6176<0x100;_0x3a6176++){_0x3402e3=(_0x3402e3+_0x496d5a[_0x3a6176]+_0x5461e9['charCodeAt'](_0x3a6176%_0x5461e9['length']))%0x100;_0x335fcc=_0x496d5a[_0x3a6176];_0x496d5a[_0x3a6176]=_0x496d5a[_0x3402e3];_0x496d5a[_0x3402e3]=_0x335fcc;}_0x3a6176=0x0;_0x3402e3=0x0;for(var _0x48caa8=0x0;_0x48caa8<_0x42755a['length'];_0x48caa8++){_0x3a6176=(_0x3a6176+0x1)%0x100;_0x3402e3=(_0x3402e3+_0x496d5a[_0x3a6176])%0x100;_0x335fcc=_0x496d5a[_0x3a6176];_0x496d5a[_0x3a6176]=_0x496d5a[_0x3402e3];_0x496d5a[_0x3402e3]=_0x335fcc;_0x56d74e+=String['fromCharCode'](_0x42755a['charCodeAt'](_0x48caa8)^_0x496d5a[(_0x496d5a[_0x3a6176]+_0x496d5a[_0x3402e3])%0x100]);}return _0x56d74e;}_0x567e['PAAgJU']=_0x2f0610;_0x567e['RrDebh']={};_0x567e['YPqfJl']=!![];}var _0x39e5da=_0x567e['RrDebh'][_0x284512];if(_0x39e5da===undefined){if(_0x567e['zznHol']===undefined){_0x567e['zznHol']=!![];}_0x43967c=_0x567e['PAAgJU'](_0x43967c,_0x5461e9);_0x567e['RrDebh'][_0x284512]=_0x43967c;}else{_0x43967c=_0x39e5da;}return _0x43967c;};console['log']($[_0x567e('‫0','2&8T')](_0x567e('‮1','Ry#s')),_0x567e('‫2','XrO#'),'20231117');const yxl=require(_0x567e('‮3','!9#o'));const notify=$[_0x567e('‮4','pKE3')]()?require('./sendNotify'):'';const fs=require('fs');const cacheDir='./cache';const aesCrypto=require('crypto-js/aes');const utf8Encode=require(_0x567e('‮5','Wplf'));const update_time=$[_0x567e('‮6','c)ja')](_0x567e('‫7','XrO#'));if(!fs['existsSync'](cacheDir)){fs[_0x567e('‫8','zHHz')](cacheDir);}let message=_0x567e('‮9','XrO#');let cachetimes=0x1;if(process[_0x567e('‮a','joLb')][_0x567e('‫b','zCq2')]&&process['env'][_0x567e('‫c','488E')]=='planb'){$['changeplan']=!![];}else{$[_0x567e('‮d','ueqf')]=![];}if(process[_0x567e('‫e','pr[6')][_0x567e('‮f','dnsG')]){$[_0x567e('‫10','9%#l')]=process['env'][_0x567e('‮11','TGQ)')]||'';$[_0x567e('‫12','X%i0')]=process[_0x567e('‫13','G7bD')][_0x567e('‫14','ueqf')]||'';$['TK_SIGN']={'id':$['TK_SIGN_ID'],'sign':$[_0x567e('‮15','^lHi')]};}else if(process['env'][_0x567e('‮16','68Az')]){$[_0x567e('‮17','jd^J')]=process[_0x567e('‮18','^lHi')][_0x567e('‫19','!6DW')];$['TK_SIGN']=$['toObj']($[_0x567e('‫1a','S8RC')],$['TK_SIGN']);}else{console[_0x567e('‫1b','F$6d')]($['time'](_0x567e('‫1c','q*ro')),_0x567e('‫1d','TGQ)'));}console['log']($[_0x567e('‫1e','joLb')](_0x567e('‫1f','3j3g')),_0x567e('‮20','I[JV'),$[_0x567e('‫21','F$6d')]['id']);!(async()=>{var _0x2c3998={'laWmt':function(_0x39017d,_0x157f43){return _0x39017d!=_0x157f43;},'hPuap':_0x567e('‫22','b$AN'),'pyQPK':function(_0x1bb8d6,_0x49b917){return _0x1bb8d6!=_0x49b917;},'SAdoR':_0x567e('‫23','y#qO'),'oVShn':function(_0x2bebe1,_0x8c0ce4){return _0x2bebe1+_0x8c0ce4;},'RzuZc':'HH:mm:ss.S----','jLEde':function(_0x2f2ef7,_0x47fd87,_0x2a9ff8,_0x506ca6){return _0x2f2ef7(_0x47fd87,_0x2a9ff8,_0x506ca6);},'cuBCV':_0x567e('‫24','X%i0'),'piavB':'cachetimes','usPnH':_0x567e('‫25','Wplf'),'WvfUu':function(_0x3d6cee,_0x3c261d){return _0x3d6cee!==_0x3c261d;},'sgJcR':_0x567e('‮26','q*ro'),'tIpDz':function(_0x544c9b){return _0x544c9b();},'KdBSE':function(_0x268916,_0x976d1c){return _0x268916(_0x976d1c);},'rxWJn':function(_0x47ff34,_0x37c3e,_0x4dcb24,_0x15ed95,_0x4d6240){return _0x47ff34(_0x37c3e,_0x4dcb24,_0x15ed95,_0x4d6240);},'TwgZK':_0x567e('‫27','q![N'),'DyomA':function(_0xddc0,_0x5557f5){return _0xddc0>_0x5557f5;},'JUzdk':'count1','ruIHp':_0x567e('‫28',')DcS'),'eIkAY':_0x567e('‮29','ZVqK'),'GzJoj':_0x567e('‮2a','pmV4'),'GsJVC':function(_0x5ad1b3){return _0x5ad1b3();}};console['log']($['time'](_0x2c3998[_0x567e('‫2b','2&8T')]),typeof $[_0x567e('‫2c','y#qO')]['id'],_0x567e('‮2d','e3K&')+$[_0x567e('‫2e','aE@A')]($['TK_SIGN']['id']));$[_0x567e('‫2f','UYoC')]=await _0x2c3998['jLEde'](ReadCache,_0x2c3998[_0x567e('‫30','q![N')],_0x2c3998['piavB'],$[_0x567e('‮31','e3K&')](_0x2c3998[_0x567e('‫32','o6(q')]));if($[_0x567e('‮33','o6(q')]){console['log']($[_0x567e('‫34','488E')](_0x2c3998[_0x567e('‮35','Wplf')]),_0x567e('‮36','pr[6')+$[_0x567e('‫37','oetI')]+'次数据！');}else{if(_0x2c3998[_0x567e('‮38','O99T')](_0x567e('‫39','Kta3'),_0x2c3998['sgJcR'])){$['cachetimes']=0x0;console[_0x567e('‫3a','q![N')]($[_0x567e('‮3b','o61g')](_0x2c3998[_0x567e('‫3c','pmV4')]),_0x567e('‫3d','joLb'));}else{if(_0x2c3998[_0x567e('‮3e','jd^J')](typeof name1_info,_0x2c3998[_0x567e('‫3f','pr[6')])){name1_info={};}let _0x41eb1c='';if(name1_info[name2]){_0x41eb1c=name1_info[name2];}_0x41eb1c=$[_0x567e('‮40','^lHi')](_0x41eb1c,_0x41eb1c);if(_0x2c3998['pyQPK'](typeof name1_info,_0x2c3998[_0x567e('‮41','!tuT')])){_0x41eb1c='';}return _0x41eb1c;}}await $[_0x567e('‮42','^lHi')](yxl[_0x567e('‮43',')DcS')](0x3e8,0x4e20));await _0x2c3998[_0x567e('‮44','68Az')](getdata);if(typeof $[_0x567e('‫45','!6DW')]!=_0x2c3998[_0x567e('‮46','dnsG')]){console['log']($[_0x567e('‫47','ZVqK')](_0x2c3998['RzuZc']),_0x2c3998[_0x567e('‫48','9%#l')],typeof $[_0x567e('‫49','!tuT')]);message+=_0x2c3998[_0x567e('‮4a','o6(q')](_0x2c3998[_0x567e('‫4b','y#qO')],typeof $[_0x567e('‫4c','F$6d')]);return;}let _0x344500=await _0x2c3998[_0x567e('‫4d','UYoC')](encrypt,JSON['stringify']($['apidata']));$[_0x567e('‮4e','ZVqK')]['dpqd_info']=$[_0x567e('‫4f','jd^J')]($[_0x567e('‮50','Ry#s')][_0x567e('‫51','Wplf')],$[_0x567e('‮52','ueqf')][_0x567e('‫53','c)ja')]);_0x344500={'maxcachetimes':$['apidata']['dpqd_info'][_0x567e('‫54','b$AN')],'cachetimes':cachetimes,'update_time':update_time,'cachedata':_0x344500};await _0x2c3998[_0x567e('‫55','2&8T')](WriteCache,_0x344500,_0x2c3998['cuBCV'],_0x567e('‫45','!6DW'),$[_0x567e('‫56','UYoC')](_0x2c3998[_0x567e('‫57','e3K&')]));await WriteCache(_0x2c3998[_0x567e('‮58','o61g')]($[_0x567e('‫59','aE@A')],0x1),_0x2c3998['cuBCV'],_0x2c3998[_0x567e('‮5a','P3(F')],$[_0x567e('‫5b','I[JV')](_0x2c3998[_0x567e('‫5c','aE@A')]));message+=_0x2c3998[_0x567e('‮5d','dGHu')];requesttimes=_0x2c3998['DyomA']($[_0x567e('‮5e','O99T')],$[_0x567e('‮5f','b$AN')][_0x567e('‮60','ZVqK')])?0x5:0x1;await yxl[$[_0x567e('‮61','c)ja')]?_0x2c3998[_0x567e('‮62','Ry#s')]:_0x2c3998[_0x567e('‫63','FQDc')]]($[_0x567e('‫19','!6DW')]['id'],$[_0x567e('‫64','zCq2')][_0x567e('‫65','!6DW')],_0x2c3998['eIkAY'],requesttimes);if(message){if(_0x2c3998[_0x567e('‮66','Wplf')](_0x2c3998['GzJoj'],_0x2c3998[_0x567e('‫67','o61g')])){console[_0x567e('‫68','!9#o')]($[_0x567e('‫69','68Az')](_0x567e('‫6a','pr[6')),_0x2c3998[_0x567e('‫6b','!tuT')],typeof $[_0x567e('‫6c','XrO#')]);message+=_0x2c3998[_0x567e('‮6d','68Az')](_0x2c3998[_0x567e('‮6e','7^V8')],typeof $[_0x567e('‮6f','2&8T')]);return;}else{await _0x2c3998['GsJVC'](showMsg);}}})()[_0x567e('‫70','7^V8')](_0x283e69=>{var _0x20caad={'WWijM':function(_0x49e318,_0x40cd76){return _0x49e318+_0x40cd76;},'OVFKP':_0x567e('‫71','^lHi')};$[_0x567e('‫72','488E')]('',_0x20caad[_0x567e('‫73','X%i0')](_0x20caad['WWijM'](_0x20caad['WWijM']('❌\x20',$[_0x567e('‮74','oetI')])+_0x20caad[_0x567e('‫75','P3(F')],_0x283e69),'!'),'');})[_0x567e('‫76','oetI')](()=>{$[_0x567e('‫77','F$6d')]();});async function getdata(){var _0x3293fb={'eBtwQ':function(_0x48c055,_0x4c6916){return _0x48c055<_0x4c6916;},'PFuit':_0x567e('‮78','2&8T'),'Wjygz':'object'};for(let _0x4cc9be=0x0;_0x3293fb[_0x567e('‫79','ueqf')](_0x4cc9be,0x3);_0x4cc9be++){$['apidata']=await yxl[$[_0x567e('‮7a','S8RC')]?_0x567e('‫7b','^lHi'):_0x3293fb[_0x567e('‮7c','UYoC')]](_0x567e('‫7d','Vgl0'),$[_0x567e('‮7e','[e(6')]['id'],$[_0x567e('‮16','68Az')][_0x567e('‫7f','dnsG')]);$[_0x567e('‫80','pmV4')]=$[_0x567e('‫81','[e(6')]($[_0x567e('‮82','dGHu')],$[_0x567e('‮83','c)ja')]);if(typeof $[_0x567e('‫84','y#qO')]==_0x3293fb[_0x567e('‫85','68Az')])break;await $[_0x567e('‮86','!6DW')](yxl[_0x567e('‮87','q*ro')](0x3e8,0x4e20));}}async function showMsg(){if($[_0x567e('‮88','q*ro')]()){$[_0x567e('‫89','joLb')]($['name'],'',''+message);await notify[_0x567e('‫8a','Vgl0')]($[_0x567e('‮8b',')DcS')]+'\x20','\x0a'+message);}}async function WriteCache(_0x10daa3,_0x360995,_0x4b4b2b,_0x2115da){var _0x49f149={'WvQBF':function(_0x134468,_0x17d0e6){return _0x134468+_0x17d0e6;},'coOLm':function(_0x28cb0a,_0x1ff22f){return _0x28cb0a===_0x1ff22f;},'pRGEx':_0x567e('‮8c','[e(6')};_0x360995?$['dataFile']=_0x49f149[_0x567e('‮8d','488E')](cacheDir,'/')+_0x360995+'.json':'';let _0x2c52ca={};if(!_0x2115da){if(_0x49f149[_0x567e('‫8e','dnsG')](_0x49f149[_0x567e('‮8f','aE@A')],_0x49f149['pRGEx'])){_0x2c52ca=_0x10daa3;}else{let _0x23a549=aesCrypto[_0x567e('‮90','Wplf')](utf8Encode[_0x567e('‮91','^lHi')](text),update_time+__dirname[_0x567e('‫92','I[JV')](-0x12))[_0x567e('‫93','ueqf')]();return _0x23a549;}}else{_0x2c52ca[_0x2115da]=_0x10daa3;}$['setdata'](_0x2c52ca,_0x4b4b2b);}async function ReadCache(_0x256f94,_0x1317b8,_0x209c48){var _0x957ec1={'HVylS':function(_0x2c36b3,_0xe0348){return _0x2c36b3+_0xe0348;},'RUlbl':_0x567e('‫94','I[JV'),'LSpqS':_0x567e('‮95','jd^J'),'EhlKp':function(_0x5756ed,_0x22562e){return _0x5756ed!=_0x22562e;},'PiJah':_0x567e('‫96','joLb'),'oxvhU':function(_0x16a0c1,_0x34f5cb){return _0x16a0c1!=_0x34f5cb;}};_0x256f94?$[_0x567e('‮97','y50s')]=_0x957ec1[_0x567e('‫98','c)ja')](cacheDir+'/',_0x256f94)+_0x957ec1[_0x567e('‫99','X%i0')]:'';let _0x47180e=$[_0x567e('‮9a','e3K&')](_0x1317b8)||'';_0x47180e=$[_0x567e('‫9b','aE@A')](_0x47180e,_0x47180e);if(!_0x209c48){if(_0x957ec1[_0x567e('‫9c','Ry#s')]!==_0x957ec1[_0x567e('‫9d','ZVqK')]){name2_info=_0x47180e[_0x209c48];}else{return _0x47180e;}}else{if(_0x957ec1['EhlKp'](typeof _0x47180e,_0x957ec1[_0x567e('‮9e','zCq2')])){_0x47180e={};}let _0x4bf8ae='';if(_0x47180e[_0x209c48]){_0x4bf8ae=_0x47180e[_0x209c48];}_0x4bf8ae=$[_0x567e('‮9f','zCq2')](_0x4bf8ae,_0x4bf8ae);if(_0x957ec1[_0x567e('‮a0','3j3g')](typeof _0x47180e,_0x957ec1[_0x567e('‮a1','!9#o')])){_0x4bf8ae='';}return _0x4bf8ae;}}async function encrypt(_0x6792c1){var _0x3ee5ff={'ltrCu':function(_0xa0247f,_0x5bf6e3){return _0xa0247f+_0x5bf6e3;}};let _0x415a9=aesCrypto['encrypt'](utf8Encode[_0x567e('‫a2','q![N')](_0x6792c1),_0x3ee5ff[_0x567e('‫a3','o6(q')](update_time,__dirname['slice'](-0x12)))[_0x567e('‮a4','^lHi')]();return _0x415a9;};_0xodR='jsjiami.com.v6';

function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
